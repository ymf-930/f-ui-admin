import{a9 as M,z as R,k as S,J as T,D as t,g as D,b as J,v as j,c as l,w as o,a as L,h as A,o as k,F as G,N as H,q as c,t as I,d as v}from"./vendor-80b6893c.js";import{u as K}from"./useTable-89b1cda0.js";import{i as O}from"./index-9e7f01af.js";import{u as P}from"./useForm-737a0a39.js";import{a as B}from"./chunk-f-ui-one-117d58dd.js";import"./chunk-brace-7735c7cc.js";import"./chunk-mockjs-ecce13f5.js";function Q(){return O({url:"/role/list",method:"get"})}const W={name:"Role",setup(){const y=R({page:1,size:10,roleName:"",status:""}),n=S([]),u=S({}),{loading:e,list:z,total:q,getListData:r,pageChange:i,pageSizeChange:w}=K(Q,y),{formRef:N,editStatus:s,pageStatus:m,editLoading:p,openCreate:g,openEdit:C,backNormal:f,submitForm:b,resetForm:h,setBtnLoading:V,modalVisible:x}=P();T(()=>z.value,_=>{n.value=_}),r();function a(){u.value={roleName:"",roleCode:"",status:"1"},g()}function d(_){u.value={..._},C()}function F(){u.value={},f()}function U(){B.success("删除成功！"),r()}function E(){b(()=>{V(!0);const _=m.value;setTimeout(()=>{B.success(`${_.isCreate?"新增":"修改"}成功！`),V(!1),f(),r()},1e3)})}return{statusMap:{0:"禁用",1:"启用"},columns:[{title:"角色名称",key:"roleName"},{title:"角色编码",key:"roleCode"},{title:"状态",slot:"status"},{title:"创建日期",key:"createDate"},{title:"操作",width:100,align:"center",slot:"action"}],formRef:N,role:u,editStatus:s,pageStatus:m,editLoading:p,openCreate:g,openEdit:C,backNormal:f,submitForm:b,resetForm:h,ruleValidate:{roleName:[{required:!0,message:"角色名称必填",trigger:"blur"}],roleCode:[{required:!0,message:"角色编码必填",trigger:"blur"}]},query:y,loading:e,total:q,copyList:n,getListData:r,pageChange:i,pageSizeChange:w,modalVisible:x,handleCreate:a,handleCancel:F,handleEdit:d,handleSubmit:E,handleDelete:U}}},X={flex:"main:right"},Y={class:"p16"},Z=v("span",null,"启用",-1),$=v("span",null,"禁用",-1);function ee(y,n,u,e,z,q){const r=t("f-input"),i=t("f-form-item"),w=t("f-option"),N=t("f-select"),s=t("f-button"),m=t("f-form"),p=t("action-button"),g=t("f-divider"),C=t("f-table"),f=t("f-page"),b=t("base-table"),h=t("page-wrapper"),V=t("f-switch"),x=t("f-collapse-wrap");return k(),D("div",null,[J(l(h,null,{default:o(()=>[l(b,null,{filter:o(()=>[l(m,{"label-width":"95px"},{default:o(()=>[l(i,{label:"角色名称"},{default:o(()=>[l(r,{modelValue:e.query.roleName,"onUpdate:modelValue":n[0]||(n[0]=a=>e.query.roleName=a),clearable:""},null,8,["modelValue"])]),_:1}),l(i,{label:"角色状态"},{default:o(()=>[l(N,{modelValue:e.query.status,"onUpdate:modelValue":n[1]||(n[1]=a=>e.query.status=a),clearable:""},{default:o(()=>[(k(!0),D(G,null,H(e.statusMap,(a,d)=>(k(),L(w,{key:d,label:a,value:d},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{"label-width":"16px"},{default:o(()=>[l(s,null,{default:o(()=>[c("重置")]),_:1}),l(s,{type:"primary",loading:e.loading,onClick:e.getListData},{default:o(()=>[c("查询")]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),action:o(()=>[l(s,{type:"primary",icon:"plus-circle",onClick:e.handleCreate},{default:o(()=>[c("新增")]),_:1},8,["onClick"])]),page:o(()=>[l(f,{total:e.total,current:e.query.page,"page-size":e.query.size,"show-sizer":"","show-total":"",onChange:e.pageChange,onSizeChange:e.pageSizeChange},null,8,["total","current","page-size","onChange","onSizeChange"])]),default:o(()=>[l(C,{columns:e.columns,data:e.copyList,loading:e.loading,size:"small",border:""},{status:o(({row:a})=>[c(I(e.statusMap[a.status]),1)]),action:o(({row:a})=>[l(p,{type:"text",icon:"edit-square","is-icon":"",tooltip:"编辑",onClick:d=>e.handleEdit(a)},null,8,["onClick"]),l(g,{type:"vertical"}),l(p,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"删除",confirm:"",onClick:d=>e.handleDelete(a)},null,8,["onClick"])]),_:1},8,["columns","data","loading"])]),_:1})]),_:1},512),[[j,!e.modalVisible]]),e.modalVisible?(k(),L(h,{key:0,title:`${e.pageStatus.isCreate?"新增":"修改"}角色`,onBack:e.handleCancel,"show-close":"",onClose:e.handleCancel},{rightFooter:o(()=>[v("div",X,[l(s,{onClick:e.handleCancel},{default:o(()=>[c("取 消")]),_:1},8,["onClick"]),l(s,{type:"primary",loading:e.editLoading,onClick:e.handleSubmit},{default:o(()=>[c("确 定")]),_:1},8,["loading","onClick"])])]),default:o(()=>[l(m,{ref:"formRef",model:e.role,rules:e.ruleValidate,"label-width":"100px","label-suffix":":"},{default:o(()=>[l(x,{title:"基础信息",shadow:"none"},{default:o(()=>[v("div",Y,[l(i,{label:"角色名称",prop:"roleName"},{default:o(()=>[l(r,{modelValue:e.role.roleName,"onUpdate:modelValue":n[2]||(n[2]=a=>e.role.roleName=a),placeholder:"输入角色名称",clearable:""},null,8,["modelValue"])]),_:1}),l(i,{label:"角色编码",prop:"roleCode"},{default:o(()=>[l(r,{modelValue:e.role.roleCode,"onUpdate:modelValue":n[3]||(n[3]=a=>e.role.roleCode=a),placeholder:"输入角色编码",clearable:""},null,8,["modelValue"])]),_:1}),l(i,{label:"角色状态"},{default:o(()=>[l(V,{size:"large",modelValue:e.role.status,"onUpdate:modelValue":n[4]||(n[4]=a=>e.role.status=a),"true-value":"1","false-value":"0"},{open:o(()=>[Z]),close:o(()=>[$]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","onBack","onClose"])):A("",!0)])}const se=M(W,[["render",ee]]);export{se as default};
