import{a9 as ee,k as n,A as te,n as ae,D as d,a as I,w as s,o as c,d as a,q as p,c as o,g as _,N as J,e as B,t as T,F as L,h as k,f as ne,T as le,ac as se,ad as oe}from"./vendor-80b6893c.js";import{a as ie}from"./chunk-f-ui-one-117d58dd.js";import{n as ce}from"./index-9e7f01af.js";import"./chunk-brace-7735c7cc.js";import"./chunk-mockjs-ecce13f5.js";const ue="/fei-admin/static/png/temp_1-5b44c19a.png",fe="/fei-admin/static/png/temp_2-b07f3fc4.png",re="/fei-admin/static/png/temp_3-5e1cf333.png",de="/fei-admin/static/png/temp_4-15b71a7f.png",pe="/fei-admin/static/png/temp_5-e8b6f052.png",me="/fei-admin/static/png/temp_6-099bf39e.png",ve="/fei-admin/static/png/temp_7-fc704490.png",_e="/fei-admin/static/png/temp_8-8a41047e.png",ge=[ue,fe,re,de,pe,me,ve,_e];function he(){const m=[];for(let v=1;v<=8;v++)m.push({id:Math.floor(Math.random()*1e4),name:`图片_${v}`,bgInfo:{url:ge[v-1],width:2447,height:3461},comps:[]});return m}const ye=m=>(se("data-v-3f9ccf98"),m=m(),oe(),m),ke={class:"preview-panel",flex:""},Ce={class:"left-images"},xe={class:"top-bar image-list"},be={class:"image-list-wp"},we=["onClick"],Se=ye(()=>a("i",{class:"el-icon-picture-outline"},null,-1)),Ie=["title","onClick"],Ve={key:0,class:"top-bar",flex:"main:justify"},De={key:0,class:"config-panel"},$e={class:"top-bar",flex:"main:justify"},Me={class:"editor"},Ne={__name:"schema-demo",setup(m){const v=n(null),C=n(null),V=n(!1),z=n({}),R=n(null),x=n(!1),g=n(""),f=n(""),D=n(""),h=n(-1),q=n(""),b=n(""),E=n(-1),r=n(he()),w=n(!1),S=n(400);function $(t,e){h.value=e,q.value=t.id,C.value.setConfig(t)}function M(t=!1){R.value=C.value.getAllConfig();const e=r.value[h.value],i=ce({id:e.id,name:e.name},R.value);r.value[h.value]=i,t&&ie({type:"success",message:"保存成功! "})}function G(t,e){e>=0&&M(),$(t,e)}function O(){g.value="全局",f.value=D.value,x.value=!0}function P(t,e,i,N){G(t,e),b.value=i.id,E.value=N,g.value=`${t.name} - ${i.alias} - `,f.value=i.script?i.script:"",x.value=!0}function K(t){f.value=`
  char c1 = 'A'
  assert c1 instanceof Character

  def c2 = 'B' as char
  assert c2 instanceof Character

  def c3 = (char)'C'
  assert c3 instanceof Character`}function j(){b.value="",E.value=-1,g.value="",f.value="",x.value=!1}function Q(){if(g.value==="全局")D.value=f.value;else{const t=r.value[h.value],e=t.comps.findIndex(i=>i.id===b.value);e>-1&&(t.comps[e].script=f.value,$(t,h.value))}j()}function W(){z.value=C.value.getAllConfig(),V.value=!0}return te(async()=>{if(r.value.length>0){S.value=v.value.clientHeight-48,w.value=!0;const t=r.value[0];t.comps=[{id:"comp_2907",name:"comp_2907",alias:"区域_2907",attr:{x:867,y:487,w:538,h:135}},{id:"comp_2951",name:"comp_2951",alias:"区域_2951",attr:{x:774,y:784,w:664,h:142}}],await ae(),$(t,0)}}),(t,e)=>{const i=d("f-icon"),N=d("f-tooltip"),F=d("f-empty"),y=d("f-button"),X=d("SchemaEditor"),U=d("f-ace-editor"),Y=d("f-modal"),Z=d("page-wrapper");return c(),I(Z,null,{default:s(()=>[a("div",ke,[a("div",Ce,[a("div",xe,[p(" 图片列表 "),o(N,{class:"item",content:"点击图片载入其区域配置",placement:"right"},{default:s(()=>[o(i,{name:"question-circle"})]),_:1})]),a("div",be,[(c(!0),_(L,null,J(r.value,(l,A)=>(c(),_("div",{key:A,class:B(["image-wrap",{"has-comps":l.comps.length}])},[a("div",{class:B(["image-item",{active:q.value===l.id}]),onClick:u=>G(l,A)},[Se,a("span",null,T(l.name),1)],10,we),(c(!0),_(L,null,J(l.comps,(u,H)=>(c(),_("div",{class:B(["item-comp",[{active:b.value===u.id},{edited:u.script&&u.script.length}]]),key:H+u.id},[a("span",{title:`${u.alias}-${u.name}`,onClick:Ae=>P(l,A,u,H)},T(u.alias),9,Ie)],2))),128))],2))),128)),r.value.length===0?(c(),I(F,{key:0},{default:s(()=>[p("暂无列表")]),_:1})):k("",!0)])]),a("div",{class:"right-config",ref_key:"contentRef",ref:v},[w.value?(c(),_("div",Ve,[a("div",null,[o(y,{plain:"",type:D.value.length?"success":"default",onClick:O},{default:s(()=>[p(" 全局配置 ")]),_:1},8,["type"]),o(y,{onClick:W},{default:s(()=>[p("查看配置")]),_:1})]),a("div",null,[o(y,{onClick:e[0]||(e[0]=l=>M(!0))},{default:s(()=>[p("保存")]),_:1})])])):k("",!0),w.value?(c(),I(X,{key:1,ref_key:"schemaRef",ref:C,height:S.value+"px",onAutoSave:M},null,8,["height"])):k("",!0),r.value.length===0&&!w.value?(c(),I(F,{key:2},{default:s(()=>[p("请先准备可操作的图片")]),_:1})):k("",!0),o(le,{name:"fade-right"},{default:s(()=>[x.value?(c(),_("div",De,[a("div",$e,[a("span",null,T(g.value)+"脚本配置",1),a("div",null,[o(y,{size:"small",plain:"",onClick:j},{default:s(()=>[p("关闭")]),_:1}),o(y,{size:"small",plain:"",type:"primary",onClick:Q},{default:s(()=>[p("保存脚本")]),_:1})])]),a("div",{class:"edit-content",style:ne({height:S.value+"px"}),flex:""},[a("div",Me,[o(U,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=l=>f.value=l),lang:"groovy",height:S.value+"px"},null,8,["modelValue","height"])]),a("div",{class:"keys"},[a("div",{class:"key-item",onClick:K},"测试脚本")])],4)])):k("",!0)]),_:1})],512)]),o(Y,{title:"当前配置",modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=l=>V.value=l),width:"700px"},{default:s(()=>[o(U,{"model-value":JSON.stringify(z.value,null,2),height:"400px"},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1})}}},Ee=ee(Ne,[["__scopeId","data-v-3f9ccf98"]]);export{Ee as default};
