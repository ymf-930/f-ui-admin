import{a9 as ee,k as n,A as te,n as ae,D as f,a as V,w as s,o as c,d as a,q as p,c as o,g,N as J,e as B,t as N,F as O,h as C,f as ne,T as le,ac as se,ad as oe}from"./vendor-hiTJ0WGS.js";import{a as ie}from"./chunk-f-ui-one-GbLvu2QU.js";import{n as ce}from"./index-i4NGkmu1.js";import"./chunk-brace-VHCFl5c9.js";import"./chunk-mockjs-AWbv7-oC.js";const ue="/fei-admin/static/png/temp_1-PxACjIj1.png",re="/fei-admin/static/png/temp_2-OlLpTLPJ.png",de="/fei-admin/static/png/temp_3-9xm-fc-D.png",fe="/fei-admin/static/png/temp_4-Bhgy2vDW.png",pe="/fei-admin/static/png/temp_5-cuy0Phex.png",me="/fei-admin/static/png/temp_6-dGeo8jPV.png",ve="/fei-admin/static/png/temp_7-TMa710aY.png",ge="/fei-admin/static/png/temp_8-VyPl9QKL.png",_e=[ue,re,de,fe,pe,me,ve,ge];function he(){const m=[];for(let v=1;v<=8;v++)m.push({id:Math.floor(Math.random()*1e4),name:`图片_${v}`,bgInfo:{url:_e[v-1],width:2447,height:3461},comps:[]});return m}const ye=m=>(se("data-v-3f9ccf98"),m=m(),oe(),m),Ce={class:"preview-panel",flex:""},ke={class:"left-images"},xe={class:"top-bar image-list"},we={class:"image-list-wp"},Ie=["onClick"],Se=ye(()=>a("i",{class:"el-icon-picture-outline"},null,-1)),Ve=["title","onClick"],be={key:0,class:"top-bar",flex:"main:justify"},De={key:0,class:"config-panel"},$e={class:"top-bar",flex:"main:justify"},Me={class:"editor"},Te={__name:"schema-demo",setup(m){const v=n(null),k=n(null),b=n(!1),P=n({}),j=n(null),x=n(!1),_=n(""),r=n(""),D=n(""),h=n(-1),z=n(""),w=n(""),G=n(-1),d=n(he()),I=n(!1),S=n(400);function $(t,e){h.value=e,z.value=t.id,k.value.setConfig(t)}function M(t=!1){j.value=k.value.getAllConfig();const e=d.value[h.value],i=ce({id:e.id,name:e.name},j.value);d.value[h.value]=i,t&&ie({type:"success",message:"保存成功! "})}function L(t,e){e>=0&&M(),$(t,e)}function U(){_.value="全局",r.value=D.value,x.value=!0}function H(t,e,i,T){L(t,e),w.value=i.id,G.value=T,_.value=`${t.name} - ${i.alias} - `,r.value=i.script?i.script:"",x.value=!0}function K(t){r.value=`
  char c1 = 'A'
  assert c1 instanceof Character

  def c2 = 'B' as char
  assert c2 instanceof Character

  def c3 = (char)'C'
  assert c3 instanceof Character`}function R(){w.value="",G.value=-1,_.value="",r.value="",x.value=!1}function Q(){if(_.value==="全局")D.value=r.value;else{const t=d.value[h.value],e=t.comps.findIndex(i=>i.id===w.value);e>-1&&(t.comps[e].script=r.value,$(t,h.value))}R()}function W(){P.value=k.value.getAllConfig(),b.value=!0}return te(async()=>{if(d.value.length>0){S.value=v.value.clientHeight-48,I.value=!0;const t=d.value[0];t.comps=[{id:"comp_2907",name:"comp_2907",alias:"区域_2907",attr:{x:867,y:487,w:538,h:135}},{id:"comp_2951",name:"comp_2951",alias:"区域_2951",attr:{x:774,y:784,w:664,h:142}}],await ae(),$(t,0)}}),(t,e)=>{const i=f("f-icon"),T=f("f-tooltip"),q=f("f-empty"),y=f("f-button"),Y=f("SchemaEditor"),E=f("f-ace-editor"),X=f("f-modal"),Z=f("page-wrapper");return c(),V(Z,null,{default:s(()=>[a("div",Ce,[a("div",ke,[a("div",xe,[p(" 图片列表 "),o(T,{class:"item",content:"点击图片载入其区域配置",placement:"right"},{default:s(()=>[o(i,{name:"question-circle"})]),_:1})]),a("div",we,[(c(!0),g(O,null,J(d.value,(l,A)=>(c(),g("div",{key:A,class:B(["image-wrap",{"has-comps":l.comps.length}])},[a("div",{class:B(["image-item",{active:z.value===l.id}]),onClick:u=>L(l,A)},[Se,a("span",null,N(l.name),1)],10,Ie),(c(!0),g(O,null,J(l.comps,(u,F)=>(c(),g("div",{class:B(["item-comp",[{active:w.value===u.id},{edited:u.script&&u.script.length}]]),key:F+u.id},[a("span",{title:`${u.alias}-${u.name}`,onClick:Ae=>H(l,A,u,F)},N(u.alias),9,Ve)],2))),128))],2))),128)),d.value.length===0?(c(),V(q,{key:0},{default:s(()=>[p("暂无列表")]),_:1})):C("",!0)])]),a("div",{class:"right-config",ref_key:"contentRef",ref:v},[I.value?(c(),g("div",be,[a("div",null,[o(y,{plain:"",type:D.value.length?"success":"default",onClick:U},{default:s(()=>[p(" 全局配置 ")]),_:1},8,["type"]),o(y,{onClick:W},{default:s(()=>[p("查看配置")]),_:1})]),a("div",null,[o(y,{onClick:e[0]||(e[0]=l=>M(!0))},{default:s(()=>[p("保存")]),_:1})])])):C("",!0),I.value?(c(),V(Y,{key:1,ref_key:"schemaRef",ref:k,height:S.value+"px",onAutoSave:M},null,8,["height"])):C("",!0),d.value.length===0&&!I.value?(c(),V(q,{key:2},{default:s(()=>[p("请先准备可操作的图片")]),_:1})):C("",!0),o(le,{name:"fade-right"},{default:s(()=>[x.value?(c(),g("div",De,[a("div",$e,[a("span",null,N(_.value)+"脚本配置",1),a("div",null,[o(y,{size:"small",plain:"",onClick:R},{default:s(()=>[p("关闭")]),_:1}),o(y,{size:"small",plain:"",type:"primary",onClick:Q},{default:s(()=>[p("保存脚本")]),_:1})])]),a("div",{class:"edit-content",style:ne({height:S.value+"px"}),flex:""},[a("div",Me,[o(E,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),lang:"groovy",height:S.value+"px"},null,8,["modelValue","height"])]),a("div",{class:"keys"},[a("div",{class:"key-item",onClick:K},"测试脚本")])],4)])):C("",!0)]),_:1})],512)]),o(X,{title:"当前配置",modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=l=>b.value=l),width:"700px"},{default:s(()=>[o(E,{"model-value":JSON.stringify(P.value,null,2),height:"400px"},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1})}}},Ge=ee(Te,[["__scopeId","data-v-3f9ccf98"]]);export{Ge as default};
