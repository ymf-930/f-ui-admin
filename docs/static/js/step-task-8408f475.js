import{k as i,a9 as Je,J as la,j as Se,D as y,o as k,a as E,w as n,c as a,a0 as u,a3 as v,b as K,d as s,q as b,g as L,F as oe,N as _e,t as ue,v as P,aB as Ye,ac as ta,ad as na,e as Pe,h as ye,P as Ze,p as ca,z as pa,E as ma,C as fa,y as va}from"./vendor-d80b6e14.js";import{a as We}from"./chunk-f-ui-one-b8a8a2af.js";import{i as ba,A as ze,j as ea,k as Qe}from"./index-13697b49.js";import"./chunk-brace-bde7130a.js";import"./chunk-mockjs-2decca2f.js";const ga=[{key:"tab0",title:"秒"},{key:"tab1",title:"分钟"},{key:"tab2",title:"小时"},{key:"tab3",title:"日"},{key:"tab4",title:"月"},{key:"tab5",title:"周"},{key:"tab6",title:"年"}],ae=i("twitter"),le=i("twitter"),te=i("twitter"),q=i("twitter"),ne=i("twitter"),D=i("notSpecified"),Be=i("twitter"),ee=i("tab0"),F=i("*"),he=i(0),me=i(1),xe=i(0),$e=i(1),se=i([]),A=i("*"),we=i(0),fe=i(1),Ne=i(0),Ie=i(1),re=i([]),W=i("*"),Ve=i(0),ve=i(1),Ue=i(0),Le=i(1),ie=i([]),j=i("*"),Oe=i(1),be=i(2),De=i(1),je=i(1),G=i([]),z=i("*"),Re=i(1),ge=i(2),qe=i(1),Ee=i(1),de=i([]),pe=i("?"),ke=i([]),_a=[{key:"2",label:"周一"},{key:"3",label:"周二"},{key:"4",label:"周三"},{key:"5",label:"周四"},{key:"6",label:"周五"},{key:"7",label:"周六"},{key:"1",label:"周日"}],Ce=i("*");function ya(l){switch(l){case"twitter":F.value="*",se.value=[];break;case"facebook":F.value=`${he.value}-${me.value}`,se.value=[];break;case"github":F.value=`${xe.value}/${$e.value}`,se.value=[];break;case"snapchat":F.value=se.value.sort(function(r,c){return r-c}).join(",");break}}function ha(l){switch(l){case"twitter":A.value="*",re.value=[];break;case"facebook":A.value=`${we.value}-${fe.value}`,re.value=[];break;case"github":A.value=`${Ne.value}/${Ie.value}`,re.value=[];break;case"snapchat":A.value=re.value.sort(function(r,c){return r-c}).join(",");break}}function wa(l){switch(l){case"twitter":W.value="*",ie.value=[];break;case"facebook":W.value=`${Ve.value}-${ve.value}`,ie.value=[];break;case"github":W.value=`${Ue.value}/${Le.value}`,ie.value=[];break;case"snapchat":W.value=ie.value.sort(function(r,c){return r-c}).join(",");break}}function Va(l){switch(l){case"twitter":j.value="*",G.value=[];break;case"notSpecified":j.value="?",G.value=[];break;case"facebook":j.value=`${Oe.value}-${be.value}`,G.value=[];break;case"github":j.value=`${De.value}/${je.value}`,G.value=[];break;case"lastDayOfMonth":j.value="L",G.value=[];break;case"snapchat":j.value=G.value.sort(function(r,c){return r-c}).join(",");break}}function ka(l){switch(l){case"twitter":z.value="*",de.value=[];break;case"facebook":z.value=`${Re.value}-${ge.value}`,de.value=[];break;case"github":z.value=`${qe.value}/${Ee.value}`,de.value=[];break;case"snapchat":z.value=de.value.sort(function(r,c){return r-c}).join(",");break}}function Ca(l){switch(l){case"notSpecified":pe.value="?",ke.value=[];break;case"snapchat":pe.value=ke.value.sort(function(r,c){return r-c}).join(",");break}}function Sa(l){switch(l){case"notSpecified":Ce.value="";break;case"twitter":Ce.value="*";break}}function Me(l){let r="";if(l)return l.indexOf("/")>-1?r="github":l.indexOf("-")>-1?r="facebook":l.indexOf("?")>-1?r="notSpecified":l.indexOf("*")>-1?r="twitter":l.indexOf("L")>-1?r="lastDayOfMonth":(l.indexOf(",")>-1,r="snapchat"),r}function Ge(l,r){switch(r){case"seconds":l+1>me.value&&(me.value=l+1);break;case"minutes":l+1>fe.value&&(fe.value=l+1);break;case"hour":l+1>ve.value&&(ve.value=l+1);break;case"day":l+1>be.value&&(be.value=l+1);break;case"month":l+1>ge.value&&(ge.value=l+1);break}}function Fe(l,r,c,p,o,f,h,S){let d=[];return c=r,l==="github"&&(d=r.split("/"),h=d[0]?Number(d[0]):d[0],S=d[1]?Number(d[1]):d[1]),l==="facebook"&&(d=r.split("-"),o=d[0]?Number(d[0]):d[0],f=d[1]?Number(d[1]):d[1]),l==="snapchat"&&(d=r.split(","),p=[...d]),[c,p,o,f,h,S]}function Ta(l){ae.value=Me(l[0]),le.value=Me(l[1]),te.value=Me(l[2]),q.value=Me(l[3]),ne.value=Me(l[4]),D.value=Me(l[5]),Be.value=Me(l[6])?Me(l[6]):"notSpecified";let r=Fe(ae.value,l[0],F.value,se.value,he.value,me.value,xe.value,$e.value),c=Fe(le.value,l[1],A.value,re.value,we.value,fe.value,Ne.value,Ie.value),p=Fe(te.value,l[2],W.value,ie.value,Ve.value,ve.value,Ue.value,Le.value),o=Fe(q.value,l[3],j.value,G.value,Oe.value,be.value,De.value,je.value),f=Fe(ne.value,l[4],z.value,de.value,Re.value,ge.value,qe.value,Ee.value),h=Fe(D.value,l[5],pe.value,ke.value,"","","",""),S=Fe(Be.value,l[6],Ce.value);F.value=r[0],se.value=r[1],he.value=r[2],me.value=r[3],xe.value=r[4],$e.value=r[5],A.value=c[0],re.value=c[1],we.value=c[2],fe.value=c[3],Ne.value=c[4],Ie.value=c[5],W.value=p[0],ie.value=p[1],Ve.value=p[2],ve.value=p[3],Ue.value=p[4],Le.value=p[5],j.value=o[0],G.value=o[1],Oe.value=o[2],be.value=o[3],De.value=o[4],je.value=o[5],z.value=f[0],de.value=f[1],Re.value=f[2],ge.value=f[3],qe.value=f[4],Ee.value=f[5],pe.value=h[0],ke.value=h[1],Ce.value=S[0]}function Ma(){ae.value="twitter",le.value="twitter",te.value="twitter",q.value="twitter",ne.value="twitter",D.value="notSpecified",Be.value="twitter",ee.value="tab0",F.value="*",he.value=0,me.value=1,xe.value=0,$e.value=1,se.value=[],A.value="*",we.value=0,fe.value=1,Ne.value=0,Ie.value=1,re.value=[],W.value="*",Ve.value=0,ve.value=1,Ue.value=0,Le.value=1,ie.value=[],j.value="*",Oe.value=1,be.value=2,De.value=1,je.value=1,G.value=[],z.value="*",Re.value=1,ge.value=2,qe.value=1,Ee.value=1,de.value=[],pe.value="?",ke.value=[],Ce.value="*"}function xa(l){return ba({url:"/task/cron",method:"post",data:{cron:l}})}const C=l=>(ta("data-v-43728ae1"),l=l(),na(),l),$a=C(()=>s("span",null,"每秒允许的通配符[, - * /]",-1)),Na=C(()=>s("span",null,"周期从",-1)),Ia=C(()=>s("span",null,"从",-1)),Ua=C(()=>s("span",null,"指定",-1)),La=C(()=>s("span",null,"每分允许的通配符[, - * /]",-1)),Oa=C(()=>s("span",null,"周期从",-1)),Da=C(()=>s("span",null,"从",-1)),ja=C(()=>s("span",null,"指定",-1)),Ra=C(()=>s("span",null,"00",-1)),qa=C(()=>s("span",null,"每时允许的通配符[, - * /]",-1)),Ea=C(()=>s("span",null,"周期从",-1)),Fa=C(()=>s("span",null,"从",-1)),Aa=C(()=>s("span",null,"指定",-1)),Wa=C(()=>s("span",null,"00",-1)),za=C(()=>s("span",null,"每日允许的通配符[, - * / ? L]",-1)),Ba=C(()=>s("span",null,"不指定",-1)),Ha=C(()=>s("span",null,"周期从",-1)),Ga=C(()=>s("span",null,"从",-1)),Ja=C(()=>s("span",null,"本月最后一天",-1)),Ka=C(()=>s("span",null,"指定",-1)),Pa={style:{"margin-bottom":"15px",color:"#f5222d"}},Qa=C(()=>s("span",null,"每月允许的通配符[, - * /]",-1)),Ya=C(()=>s("span",null,"周期从",-1)),Xa=C(()=>s("span",null,"从",-1)),Za=C(()=>s("span",null,"指定",-1)),el=C(()=>s("span",null,"不指定",-1)),al=C(()=>s("span",null,"指定",-1)),ll={style:{"margin-bottom":"15px",color:"#f5222d"}},tl=C(()=>s("span",null,"每年",-1)),nl=C(()=>s("span",null,"不指定",-1)),ol=C(()=>s("p",{style:{"margin-bottom":"-15px"}},"表达式",-1)),ul=C(()=>s("p",{style:{"margin-bottom":"5px"}},"表达式字段:",-1)),sl=C(()=>s("p",{style:{"margin-top":"15px","margin-bottom":"5px"}},"Cron表达式:",-1)),rl={style:{"margin-top":"15px","margin-bottom":"5px"}},il={class:"runntingTime demo-loading"},dl={class:"footer"},cl=Ye({name:"cron-expressions"}),pl=Object.assign(cl,{emits:["select"],setup(l,{expose:r,emit:c}){const p=i(!1),o=i([]),f=i(null),h=i(!1);la([()=>se.value,()=>he.value,()=>me.value,()=>xe.value,()=>$e.value,()=>re.value,()=>we.value,()=>fe.value,()=>Ne.value,()=>Ie.value,()=>ie.value,()=>Ve.value,()=>ve.value,()=>Ue.value,()=>Le.value,()=>G.value,()=>Oe.value,()=>be.value,()=>De.value,()=>je.value,()=>de.value,()=>Re.value,()=>ge.value,()=>qe.value,()=>Ee.value,()=>ke.value],([I,t,N,g,T,U,ce,J,He,B,H,Y,w,_,O,e,m,R,x,Ke,Ae,sa,ra,ia,da,Xe])=>{ae.value=I.length>0?"snapchat":ae.value,ae.value==="snapchat"&&(F.value=I.sort(function(X,Z){return X-Z}).join(",")),ae.value==="facebook"&&(F.value=`${t}-${N}`),ae.value==="github"&&(F.value=`${g}/${T}`),le.value=U.length>0?"snapchat":le.value,le.value==="snapchat"&&(A.value=U.sort(function(X,Z){return X-Z}).join(",")),le.value==="facebook"&&(A.value=`${ce}-${J}`),le.value==="github"&&(A.value=`${He}/${B}`),te.value=H.length>0?"snapchat":te.value,te.value==="snapchat"&&(W.value=H.sort(function(X,Z){return X-Z}).join(",")),te.value==="facebook"&&(W.value=`${Y}-${w}`),te.value==="github"&&(W.value=`${_}/${O}`),q.value=e.length>0?"snapchat":q.value,q.value==="snapchat"&&(j.value=e.sort(function(X,Z){return X-Z}).join(",")),q.value==="facebook"&&(j.value=`${m}-${R}`),q.value==="github"&&(j.value=`${x}/${Ke}`),ne.value=Ae.length>0?"snapchat":ne.value,ne.value==="snapchat"&&(z.value=Ae.sort(function(X,Z){return X-Z}).join(",")),ne.value==="facebook"&&(z.value=`${sa}-${ra}`),ne.value==="github"&&(z.value=`${ia}/${da}`),D.value=Xe.length>0?"snapchat":D.value,D.value==="snapchat"&&(pe.value=Xe.sort(function(X,Z){return X-Z}).join(","))},{immediate:!0});const S=Se(()=>[F.value,A.value,W.value,j.value,z.value,pe.value,Ce.value].join(" ")),d=i(null);function V(){p.value=!1}function M(){$().then(I=>{I?(p.value=!1,c("select",S.value,d.value)):We.error("请选择正确的Cron表达式")})}async function $(){h.value=!0;try{const{list:I,scheduleConfStr:t}=await xa(S.value);return f.value=I,d.value=t,h.value=!1,new Promise(N=>N(!0))}catch{return We.error("请选择正确的Cron表达式"),h.value=!1,new Promise(t=>t(!1))}}async function Q(I){o.value=I.split(" "),await Ta(o.value),p.value=!0}async function Te(){await Ma(),p.value=!1}return r({open:Q}),(I,t)=>{const N=y("f-tabs"),g=y("f-radio"),T=y("f-input-number"),U=y("f-checkbox"),ce=y("f-checkbox-group"),J=y("f-radio-group"),He=y("f-divider"),B=y("f-button"),H=y("f-input"),Y=y("f-col"),w=y("f-row"),_=y("f-loading"),O=y("f-modal");return k(),E(O,{modelValue:p.value,"onUpdate:modelValue":t[48]||(t[48]=e=>p.value=e),width:"1200px","append-to-body":"","destroy-on-close":"","mask-closable":!1,onClosed:Te},{default:n(()=>[a(N,{modelValue:u(ee),"onUpdate:modelValue":t[0]||(t[0]=e=>v(ee)?ee.value=e:null),data:u(ga)},null,8,["modelValue","data"]),K(s("div",null,[a(J,{modelValue:u(ae),"onUpdate:modelValue":t[7]||(t[7]=e=>v(ae)?ae.value=e:null),onChange:u(ya)},{default:n(()=>[a(g,{label:"twitter",disabled:""},{default:n(()=>[$a]),_:1}),a(g,{label:"facebook"},{default:n(()=>[Na,a(T,{max:58,min:0,modelValue:u(he),"onUpdate:modelValue":t[1]||(t[1]=e=>v(he)?he.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus",onChange:t[2]||(t[2]=e=>u(Ge)(e,"seconds"))},null,8,["modelValue"]),b(" — "),a(T,{max:59,min:u(he)+1,modelValue:u(me),"onUpdate:modelValue":t[3]||(t[3]=e=>v(me)?me.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["min","modelValue"]),b(" 秒 ")]),_:1}),a(g,{label:"github"},{default:n(()=>[Ia,a(T,{max:59,min:0,modelValue:u(xe),"onUpdate:modelValue":t[4]||(t[4]=e=>v(xe)?xe.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 秒开始,每 "),a(T,{max:59,min:1,modelValue:u($e),"onUpdate:modelValue":t[5]||(t[5]=e=>v($e)?$e.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 秒执行一次 ")]),_:1}),a(g,{label:"snapchat",class:"checkbox"},{default:n(()=>[Ua,a(ce,{modelValue:u(se),"onUpdate:modelValue":t[6]||(t[6]=e=>v(se)?se.value=e:null)},{default:n(()=>[(k(),L(oe,null,_e(60,(e,m)=>a(U,{label:m.toString(),key:m},{default:n(()=>[s("span",null,ue(10>m?"0"+m:m),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","onChange"])],512),[[P,u(ee)==="tab0"]]),K(s("div",null,[a(J,{modelValue:u(le),"onUpdate:modelValue":t[14]||(t[14]=e=>v(le)?le.value=e:null),onChange:u(ha)},{default:n(()=>[a(g,{label:"twitter",disabled:""},{default:n(()=>[La]),_:1}),a(g,{label:"facebook"},{default:n(()=>[Oa,a(T,{max:58,min:0,modelValue:u(we),"onUpdate:modelValue":t[8]||(t[8]=e=>v(we)?we.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus",onChange:t[9]||(t[9]=e=>u(Ge)(e,"minutes"))},null,8,["modelValue"]),b(" — "),a(T,{max:59,min:u(we)+1,modelValue:u(fe),"onUpdate:modelValue":t[10]||(t[10]=e=>v(fe)?fe.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["min","modelValue"]),b(" 分 ")]),_:1}),a(g,{label:"github"},{default:n(()=>[Da,a(T,{max:59,min:0,modelValue:u(Ne),"onUpdate:modelValue":t[11]||(t[11]=e=>v(Ne)?Ne.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 分开始,每 "),a(T,{max:59,min:1,modelValue:u(Ie),"onUpdate:modelValue":t[12]||(t[12]=e=>v(Ie)?Ie.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 分执行一次 ")]),_:1}),a(g,{label:"snapchat",class:"checkbox"},{default:n(()=>[ja,a(ce,{modelValue:u(re),"onUpdate:modelValue":t[13]||(t[13]=e=>v(re)?re.value=e:null)},{default:n(()=>[Ra,(k(),L(oe,null,_e(60,(e,m)=>a(U,{label:m.toString(),key:m},{default:n(()=>[s("span",null,ue(10>m?"0"+m:m),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","onChange"])],512),[[P,u(ee)==="tab1"]]),K(s("div",null,[a(J,{modelValue:u(te),"onUpdate:modelValue":t[21]||(t[21]=e=>v(te)?te.value=e:null),onChange:u(wa)},{default:n(()=>[a(g,{label:"twitter"},{default:n(()=>[qa]),_:1}),a(g,{label:"facebook"},{default:n(()=>[Ea,a(T,{max:22,min:0,modelValue:u(Ve),"onUpdate:modelValue":t[15]||(t[15]=e=>v(Ve)?Ve.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus",onChange:t[16]||(t[16]=e=>u(Ge)(e,"hour"))},null,8,["modelValue"]),b(" — "),a(T,{max:23,min:u(Ve)+1,modelValue:u(ve),"onUpdate:modelValue":t[17]||(t[17]=e=>v(ve)?ve.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["min","modelValue"]),b(" 小时 ")]),_:1}),a(g,{label:"github"},{default:n(()=>[Fa,a(T,{max:23,min:0,modelValue:u(Ue),"onUpdate:modelValue":t[18]||(t[18]=e=>v(Ue)?Ue.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 小时开始,每 "),a(T,{max:23,min:1,modelValue:u(Le),"onUpdate:modelValue":t[19]||(t[19]=e=>v(Le)?Le.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 小时执行一次 ")]),_:1}),a(g,{label:"snapchat",class:"checkbox"},{default:n(()=>[Aa,a(ce,{modelValue:u(ie),"onUpdate:modelValue":t[20]||(t[20]=e=>v(ie)?ie.value=e:null)},{default:n(()=>[Wa,(k(),L(oe,null,_e(24,(e,m)=>a(U,{label:m.toString(),key:m},{default:n(()=>[s("span",null,ue(10>m?"0"+m:m),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","onChange"])],512),[[P,u(ee)==="tab2"]]),K(s("div",null,[a(J,{modelValue:u(q),"onUpdate:modelValue":t[28]||(t[28]=e=>v(q)?q.value=e:null),onChange:u(Va)},{default:n(()=>[a(g,{label:"twitter",disabled:u(D)==="snapchat"},{default:n(()=>[za]),_:1},8,["disabled"]),a(g,{label:"notSpecified"},{default:n(()=>[Ba]),_:1}),a(g,{label:"facebook",disabled:u(D)==="snapchat"},{default:n(()=>[Ha,a(T,{max:30,min:1,modelValue:u(Oe),"onUpdate:modelValue":t[22]||(t[22]=e=>v(Oe)?Oe.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus",onChange:t[23]||(t[23]=e=>u(Ge)(e,"day"))},null,8,["modelValue"]),b(" — "),a(T,{max:31,min:2,modelValue:u(be),"onUpdate:modelValue":t[24]||(t[24]=e=>v(be)?be.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 日 ")]),_:1},8,["disabled"]),a(g,{label:"github",disabled:u(D)==="snapchat"},{default:n(()=>[Ga,a(T,{max:31,min:1,modelValue:u(De),"onUpdate:modelValue":t[25]||(t[25]=e=>v(De)?De.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 日开始,每 "),a(T,{max:31,min:1,modelValue:u(je),"onUpdate:modelValue":t[26]||(t[26]=e=>v(je)?je.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 天执行一次 ")]),_:1},8,["disabled"]),a(g,{label:"lastDayOfMonth",disabled:u(D)==="snapchat"},{default:n(()=>[Ja]),_:1},8,["disabled"]),a(g,{label:"snapchat",class:"checkbox",disabled:u(D)==="snapchat"},{default:n(()=>[Ka,a(ce,{modelValue:u(G),"onUpdate:modelValue":t[27]||(t[27]=e=>v(G)?G.value=e:null)},{default:n(()=>[(k(),L(oe,null,_e(31,(e,m)=>a(U,{label:e.toString(),key:m,disabled:u(D)==="snapchat"},{default:n(()=>[s("span",null,ue(10>e?"0"+e:e),1)]),_:2},1032,["label","disabled"])),64))]),_:1},8,["modelValue"])]),_:1},8,["disabled"])]),_:1},8,["modelValue","onChange"]),K(s("p",Pa," 日和周不能同时指定 ",512),[[P,u(D)==="snapchat"]])],512),[[P,u(ee)==="tab3"]]),K(s("div",null,[a(J,{modelValue:u(ne),"onUpdate:modelValue":t[35]||(t[35]=e=>v(ne)?ne.value=e:null),onChange:u(ka)},{default:n(()=>[a(g,{label:"twitter"},{default:n(()=>[Qa]),_:1}),a(g,{label:"facebook"},{default:n(()=>[Ya,a(T,{max:11,min:1,modelValue:u(Re),"onUpdate:modelValue":t[29]||(t[29]=e=>v(Re)?Re.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus",onChange:t[30]||(t[30]=e=>u(Ge)(e,"month"))},null,8,["modelValue"]),b(" — "),a(T,{max:12,min:2,modelValue:u(ge),"onUpdate:modelValue":t[31]||(t[31]=e=>v(ge)?ge.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 月 ")]),_:1}),a(g,{label:"github"},{default:n(()=>[Xa,a(T,{max:12,min:1,modelValue:u(qe),"onUpdate:modelValue":t[32]||(t[32]=e=>v(qe)?qe.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 月开始,每 "),a(T,{max:12,min:1,modelValue:u(Ee),"onUpdate:modelValue":t[33]||(t[33]=e=>v(Ee)?Ee.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 月执行一次 ")]),_:1}),a(g,{label:"snapchat",class:"checkbox"},{default:n(()=>[Za,a(ce,{modelValue:u(de),"onUpdate:modelValue":t[34]||(t[34]=e=>v(de)?de.value=e:null)},{default:n(()=>[(k(),L(oe,null,_e(12,(e,m)=>a(U,{label:e.toString(),key:m},{default:n(()=>[s("span",null,ue(e),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","onChange"])],512),[[P,u(ee)==="tab4"]]),K(s("div",null,[a(J,{modelValue:u(D),"onUpdate:modelValue":t[37]||(t[37]=e=>v(D)?D.value=e:null),onChange:u(Ca)},{default:n(()=>[a(g,{label:"notSpecified"},{default:n(()=>[el]),_:1}),a(g,{label:"snapchat",class:"checkbox",disabled:u(q)!=="notSpecified"},{default:n(()=>[al,a(ce,{modelValue:u(ke),"onUpdate:modelValue":t[36]||(t[36]=e=>v(ke)?ke.value=e:null)},{default:n(()=>[(k(!0),L(oe,null,_e(u(_a),(e,m)=>(k(),E(U,{label:e.key,key:m,disabled:u(q)!=="notSpecified"},{default:n(()=>[s("span",null,ue(e.label),1)]),_:2},1032,["label","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["disabled"])]),_:1},8,["modelValue","onChange"]),K(s("p",ll," 日和周不能同时指定 ",512),[[P,u(q)!=="notSpecified"]])],512),[[P,u(ee)==="tab5"]]),K(s("div",null,[a(J,{modelValue:u(Be),"onUpdate:modelValue":t[38]||(t[38]=e=>v(Be)?Be.value=e:null),onChange:u(Sa)},{default:n(()=>[a(g,{label:"twitter"},{default:n(()=>[tl]),_:1}),a(g,{label:"notSpecified"},{default:n(()=>[nl]),_:1})]),_:1},8,["modelValue","onChange"])],512),[[P,u(ee)==="tab6"]]),ol,a(He),ul,a(w,{gutter:20,class:"gutter"},{default:n(()=>[a(Y,{span:"4"},{default:n(()=>[a(H,{placeholder:"*",modelValue:u(F),"onUpdate:modelValue":t[39]||(t[39]=e=>v(F)?F.value=e:null),style:{width:"auto"},readonly:""},{append:n(()=>[a(B,null,{default:n(()=>[b("秒")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(Y,{span:"4"},{default:n(()=>[a(H,{placeholder:"*",modelValue:u(A),"onUpdate:modelValue":t[40]||(t[40]=e=>v(A)?A.value=e:null),style:{width:"auto"},readonly:""},{append:n(()=>[a(B,null,{default:n(()=>[b("分")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(Y,{span:"4"},{default:n(()=>[a(H,{placeholder:"*",modelValue:u(W),"onUpdate:modelValue":t[41]||(t[41]=e=>v(W)?W.value=e:null),style:{width:"auto"},readonly:""},{append:n(()=>[a(B,null,{default:n(()=>[b("时")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(Y,{span:"3"},{default:n(()=>[a(H,{placeholder:"*",modelValue:u(j),"onUpdate:modelValue":t[42]||(t[42]=e=>v(j)?j.value=e:null),style:{width:"auto"},readonly:""},{append:n(()=>[a(B,null,{default:n(()=>[b("日")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(Y,{span:"3"},{default:n(()=>[a(H,{placeholder:"*",modelValue:u(z),"onUpdate:modelValue":t[43]||(t[43]=e=>v(z)?z.value=e:null),style:{width:"auto"},readonly:""},{append:n(()=>[a(B,null,{default:n(()=>[b("月")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(Y,{span:"3"},{default:n(()=>[a(H,{placeholder:"?",modelValue:u(pe),"onUpdate:modelValue":t[44]||(t[44]=e=>v(pe)?pe.value=e:null),style:{width:"auto"},readonly:""},{append:n(()=>[a(B,null,{default:n(()=>[b("周")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(Y,{span:"3"},{default:n(()=>[a(H,{modelValue:u(Ce),"onUpdate:modelValue":t[45]||(t[45]=e=>v(Ce)?Ce.value=e:null),style:{width:"auto"},readonly:""},{append:n(()=>[a(B,null,{default:n(()=>[b("年")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),sl,a(H,{modelValue:S.value,"onUpdate:modelValue":t[46]||(t[46]=e=>S.value=e),readonly:"",class:"input-item"},null,8,["modelValue"]),s("p",rl,[a(ze,{type:"success",onClick:t[47]||(t[47]=e=>$())},{default:n(()=>[b("测试")]),_:1}),b(" 最近运行10次时间: ")]),s("ul",il,[(k(!0),L(oe,null,_e(f.value,(e,m)=>(k(),L("li",{key:m},ue(e),1))),128)),K(a(_,{fix:""},null,512),[[P,h.value]])]),s("div",dl,[a(B,{size:"large",onClick:V},{default:n(()=>[b("取消")]),_:1}),a(B,{type:"primary",size:"large",onClick:M},{default:n(()=>[b("确定")]),_:1})])]),_:1},8,["modelValue"])}}}),ml=Je(pl,[["__scopeId","data-v-43728ae1"]]),oa="0 0 9 * * ? ",ua="每天9点0分0秒执行一次",fl=Ye({name:"cron-expression-modal"}),vl=Object.assign(fl,{props:{scheduleConf:{type:String,default:oa},isCreate:{type:Boolean,default:!0},scheduleConfStr:{type:String,default:ua}},emits:["update:scheduleConf","update:scheduleConfStr"],setup(l,{expose:r,emit:c}){const p=l,o=i(null),f=i(null);function h(){o.value&&o.value.open(p.scheduleConf,p.isCreate)}function S(d,V){f.value=V,c("update:scheduleConf",d),c("update:scheduleConfStr",V)}return la(()=>p.scheduleConfStr,d=>{f.value=d},{immediate:!0}),r({handleOpen:h}),(d,V)=>{const M=y("f-button"),$=y("f-input");return k(),L("div",null,[a($,{readonly:"","model-value":f.value},{append:n(()=>[a(M,{background:"",onClick:h},{default:n(()=>[b("选择")]),_:1})]),_:1},8,["model-value"]),a(ml,{ref_key:"cronRef",ref:o,onSelect:S},null,512)])}}}),bl={__name:"basicTasks",props:{modelValue:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(l,{emit:r}){const c=l,p=Se({get:()=>c.modelValue,set:o=>r("update:modelValue",o)});return(o,f)=>{const h=y("f-input"),S=y("f-form-item"),d=y("f-col"),V=y("f-row");return k(),L(oe,null,[a(V,{gutter:16},{default:n(()=>[a(d,{span:8},{default:n(()=>[a(S,{label:"任务名称",prop:"taskName"},{default:n(()=>[a(h,{modelValue:p.value.taskName,"onUpdate:modelValue":f[0]||(f[0]=M=>p.value.taskName=M),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(d,{span:"8"},{default:n(()=>[a(S,{label:"调度策略",prop:"scheduleConf"},{default:n(()=>[a(vl,{scheduleConf:p.value.scheduleConf,"onUpdate:scheduleConf":f[1]||(f[1]=M=>p.value.scheduleConf=M),scheduleConfStr:p.value.scheduleConfStr,"onUpdate:scheduleConfStr":f[2]||(f[2]=M=>p.value.scheduleConfStr=M)},null,8,["scheduleConf","scheduleConfStr"])]),_:1})]),_:1})]),_:1}),a(S,{label:"描述"},{default:n(()=>[a(h,{modelValue:p.value.taskDesc,"onUpdate:modelValue":f[3]||(f[3]=M=>p.value.taskDesc=M),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})],64)}}};const gl={class:"ef-node-left-ico flow-node-drag"},_l=["title"],yl={__name:"field-node",props:{node:{type:Object,default:()=>({})},icon:{type:String,default:"index"},type:{type:String,default:"primary"},required:{type:Boolean},sourceType:{type:String,default:"source"}},emits:["singleFieldMapping"],setup(l,{emit:r}){const c=i(null),p=Se(()=>["ef-node-container","el-node-info","info"]);return(o,f)=>{const h=y("f-tag"),S=y("f-button"),d=y("f-input");return k(),L("div",{ref_key:"nodeRef",ref:c,class:Pe(p.value),allowdrop:""},[s("div",{class:Pe(["ef-node-left","info"])}),s("div",gl,[s("i",{class:Pe(`f-iconfont f-icon-${l.icon}`)},null,2)]),s("div",{class:"ef-node-text node-edit",title:l.node.name},[a(h,{type:l.required?"danger":"default",dot:"",title:l.required?"必填项":"非必填"},null,8,["type","title"]),l.sourceType==="target"?(k(),E(d,{key:0,"model-value":l.node.name,size:"small",readonly:""},{append:n(()=>[a(S,{size:"small",type:"text",title:"单字段映射",onClick:f[0]||(f[0]=V=>r("singleFieldMapping"))},{default:n(()=>[b(" 映射 ")]),_:1})]),_:1},8,["model-value"])):(k(),E(d,{key:1,"model-value":l.node.name,size:"small",readonly:""},null,8,["model-value"]))],8,_l)],2)}}},aa=Je(yl,[["__scopeId","data-v-173ace18"]]);const hl={flex:"cross:center"},wl={class:"list-wrap"},Vl={class:"pt-16 pl-8 pr-8 pb-16",flex:""},kl={style:{color:"#8a92a6"},class:"table-name ml-8"},Cl={class:"list-inner"},Sl={class:"pl-8 pr-8",allowdrop:""},Tl={key:0,class:"list-empty"},Ml={class:"table-bottom"},xl={__name:"field-list",props:{title:{type:String,default:"标题"},sourceName:{type:String},sourceType:{type:String,default:"source"},list:{type:Array,default:()=>[]},disabledKeys:{type:Array,default:()=>[]},fieldTitle:{type:String,default:""},noDataWarn:{type:String,default:"请先配置选择数据源"},itemMaps:{type:Array,default:()=>[]}},emits:["setting","node-drop","clear","singleFieldMapp"],setup(l,{emit:r}){function c(d,V){d.dataTransfer.setData("node",JSON.stringify(V))}function p(d,V){d.dataTransfer.setData("destnode",JSON.stringify(V))}function o(d,V){d.preventDefault();let M=d.dataTransfer.getData("node"),$={};try{$=JSON.parse(M)}catch{console.log("drag data is not right json!");return}d.target.getAttribute("allowdrop")!==null&&d.target.toggleAttribute("over",!1),r("node-drop",{source:$,dest:V,ev:d})}let f=null;function h(d){f&&f.toggleAttribute("over",!1);const V=d.target.closest("[allowdrop]");V&&(V.toggleAttribute("over",!0),f=V)}function S(d){d.target.getAttribute("allowdrop")!==null&&d.target.toggleAttribute("over",!1)}return(d,V)=>{const M=y("f-button"),$=y("f-icon"),Q=y("f-empty"),Te=y("f-scrollbar"),I=y("f-collapse-wrap");return k(),E(I,{title:l.title,shadow:"none"},{right:n(()=>[s("div",hl,[l.sourceName?(k(),E(M,{key:0,type:l.sourceType==="source"?"primary":"success",style:{"margin-right":"4px",width:"130px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"inline-block"},title:l.sourceName,size:"small",plain:""},{default:n(()=>[b(ue(l.sourceName),1)]),_:1},8,["type","title"])):ye("",!0),a($,{name:"setting",type:"button",onClick:V[0]||(V[0]=()=>r("setting"))})])]),default:n(()=>[s("div",wl,[s("div",Vl,[a($,{name:"menu"}),s("a",kl,ue(l.fieldTitle),1)]),s("div",Cl,[a(Te,null,{default:n(()=>[s("div",Sl,[l.sourceType==="source"?(k(),E(Ze,{key:0,tag:"div",name:"fade"},{default:n(()=>[(k(!0),L(oe,null,_e(l.list,t=>(k(),E(aa,{key:t.name,node:t,required:t.required,type:l.sourceType==="source"?"primary":"success",icon:l.sourceType==="source"?"send":"aim",draggable:l.sourceType==="source",onDragstart:N=>c(N,t)},null,8,["node","required","type","icon","draggable","onDragstart"]))),128))]),_:1})):ye("",!0),l.sourceType==="target"?(k(),E(Ze,{key:1,tag:"div",name:"fade"},{default:n(()=>[(k(!0),L(oe,null,_e(l.list,t=>(k(),E(aa,{key:t.name,node:t,required:t.required,type:l.sourceType==="source"?"primary":"success",icon:l.sourceType==="source"?"send":"aim",draggable:!0,sourceType:l.sourceType,onSingleFieldMapping:()=>r("singleFieldMapp",t),onDragstart:N=>p(N,t),onDragover:V[1]||(V[1]=ca(()=>{},["prevent"])),onDrop:N=>o(N,t),onDragenter:N=>h(N,t),onDragleave:N=>S(N,t)},null,8,["node","required","type","icon","sourceType","onSingleFieldMapping","onDragstart","onDrop","onDragenter","onDragleave"]))),128))]),_:1})):ye("",!0)]),l.list.length===0&&l.itemMaps.length===0?(k(),L("div",Tl,[a(Q,null,{default:n(()=>[b(ue(l.noDataWarn),1)]),_:1})])):ye("",!0)]),_:1})]),s("p",Ml,[l.sourceType==="source"?(k(),E(ze,{key:0,type:"text",icon:"delete",color:"danger",confirm:"",message:"清空信息项会重置已配置的内容！",onClick:V[2]||(V[2]=()=>r("clear"))})):ye("",!0),l.sourceType==="target"?(k(),E(ze,{key:1,type:"text",icon:"delete",color:"danger",confirm:"",message:"清空信息项会重置已配置的内容！",onClick:V[3]||(V[3]=()=>r("clear"))})):ye("",!0)])])]),_:1},8,["title"])}}},$l=Je(xl,[["__scopeId","data-v-b4240279"]]);const Nl=l=>(ta("data-v-33a41de0"),l=l(),na(),l),Il={class:"right-table-wrap"},Ul={class:"inner-box"},Ll={class:"map-res"},Ol={class:"table-title"},Dl=Nl(()=>s("div",{class:"map-title"},"映射关系",-1)),jl={key:0,class:"ctrl"},Rl={class:"p16"},ql=["title"],El={__name:"right-table-wrap",props:{tableList1:{type:Array,default:()=>[]},tableList2:{type:Array,default:()=>[]},itemMaps:{type:Array,default:()=>[]}},emits:["autoMap","cancelAllMap","cancelOneMap"],setup(l,{emit:r}){const c=i([{title:"源信息项",key:"sourceName",minWidth:140},{title:"目标信息项",slot:"targetName",minWidth:140},{title:"操作",slot:"action",width:100}]);return(p,o)=>{const f=y("f-table");return k(),L("div",Il,[s("div",Ul,[s("div",Ll,[s("div",Ol,[Dl,l.tableList1.length&&l.tableList2.length?(k(),L("div",jl,[a(ze,{type:"text",tooltip:"自动映射",confirm:"",message:"自动映射会取消已添加的映射！",onClick:o[0]||(o[0]=()=>r("autoMap"))},{default:n(()=>[b(" 自动映射 ")]),_:1}),a(ze,{type:"text",tooltip:"全部重置",confirm:"",message:"确定重置吗！",onClick:o[1]||(o[1]=()=>r("cancelAllMap"))},{default:n(()=>[b(" 重置映射 ")]),_:1})])):ye("",!0)]),s("div",Rl,[a(f,{columns:c.value,data:l.itemMaps,"max-height":"500",size:"small","disabled-hover":"",border:""},{targetName:n(({row:h})=>[s("span",{title:h.desc},ue(h.targetName),9,ql)]),action:n(({row:h,index:S})=>[a(ze,{type:"text",icon:"minus-circle",color:"danger",tooltip:"移除",onClick:()=>r("cancelOneMap",h,S)},null,8,["onClick"])]),_:1},8,["columns","data"])])])])])}}},Fl=Je(El,[["__scopeId","data-v-33a41de0"]]);function Al(l,r){const c=i(null),p=i(null),o=pa({tableSourceData:{},tableSourceItems:[],tableTargetData:{},tableTargetItems:[],tableList1:[],tableList2:[],completeFields:[],itemMaps:[],currentRow1Index:-1,currentRow1:null,currentRow2:null}),f=Se({get:()=>l.formObj,set:w=>r("update:formObj",w)});let h=i(!0);const S=ma("TaskStep"),d=async()=>{o.tableSourceData={tableName:"aaa"},f.value.nodeTableName="aaa",M(),o.tableSourceItems=[{name:"id",desc:null,required:!0,dataType:"varchar"},{name:"update_date",desc:null,required:!0,dataType:"timestamp"},{name:"name",desc:null,required:!1,dataType:"varchar"},{name:"age",desc:null,required:!1,dataType:"int2"},{name:"sex",desc:null,required:!1,dataType:"varchar"}],o.tableList1=Qe(o.tableSourceItems)},V=async()=>{f.value.metadataName="bbb",M(),o.tableTargetItems=[{name:"js_id",desc:"教师编号",required:!0,dataType:"varchar"},{name:"js_name",desc:"教师姓名",required:!0,dataType:"varchar"},{name:"bz",desc:"备注",required:!1,dataType:"varchar"},{name:"qhdm",desc:"区划代码",required:!1,dataType:"varchar"},{name:"birthday",desc:"出生日期",required:!1,dataType:"varchar"}],o.tableList2=Qe(o.tableTargetItems)};function M(){S.value=0,o.tableSourceData.tableName&&(S.value=1)}function $(){o.tableSourceData={},o.tableSourceItems=[],o.tableList1=[],f.value.nodeTableName="",g()}function Q(){o.tableTargetData={},o.tableTargetItems=[],o.tableList2=[],f.value.metadataName="",g()}const Te=Se(()=>{if(ea(o.tableSourceItems)||ea(o.tableTargetItems))return[];const w=o.tableSourceItems.map(x=>x.name),_=o.tableTargetItems.map(x=>x.name);let O=[];_.forEach(x=>O.push(x.toLowerCase()));let e=w.filter(x=>O.includes(x.toLowerCase())),m=[],R=[];e.forEach(x=>{m.push(x.toLowerCase())});for(let x=0;x<e.length;x++)m.filter(Ae=>Ae===e[x].toLowerCase()).length===1&&R.push(e[x]);return R}),I=Se(()=>!!o.tableTargetItems.find(w=>w.required));function t(){o.completeFields=Qe(o.itemMaps),h.value=!0,o.itemMaps.find(_=>_.sourceName==="")&&g(),o.itemMaps=o.itemMaps.filter(_=>_.sourceName!==""),Te.value.forEach(_=>{const O=o.tableSourceItems.findIndex(R=>{if(R.name.toLowerCase()===_.toLowerCase())return R}),e=o.tableTargetItems.findIndex(R=>{if(R.name.toLowerCase()===_.toLowerCase())return R}),m=o.tableTargetItems[e];o.itemMaps.push({sourceName:_,targetName:m.name,dataType:m==null?void 0:m.dataType,ctrlType:m==null?void 0:m.ctrlType,desc:m==null?void 0:m.desc,dictMap:[],defaultValue:"",transValue:""}),O!==-1&&o.tableSourceItems.splice(O,1),e!==-1&&o.tableTargetItems.splice(e,1)}),We.success("自动映射执行完毕!")}function N({source:w,dest:_}){o.currentRow1=w,o.currentRow2=_,o.itemMaps.push({sourceName:w?w.name:"",targetName:_.name,dataType:_==null?void 0:_.dataType,ctrlType:_==null?void 0:_.ctrlType,desc:_==null?void 0:_.desc,dictMap:[],defaultValue:"",transValue:""}),ce(),M()}function g(){o.itemMaps.forEach((w,_)=>{U(w.sourceName,w.targetName)}),o.itemMaps=[],M(),h.value=!1}function T(w,_){U(w.sourceName,w.targetName),o.itemMaps.splice(_,1),h.value=!1}function U(w,_){const O=o.tableList1.find(m=>m.name.toLowerCase()===w.toLowerCase()),e=o.tableList2.find(m=>m.name.toLowerCase()===_.toLowerCase());O&&o.tableSourceItems.unshift(O),e&&o.tableTargetItems.unshift(e)}function ce(){if(o.currentRow1){const w=o.tableSourceItems.findIndex(_=>_.name===o.currentRow1.name);o.tableSourceItems.splice(w,1),o.currentRow1Index=-1,o.currentRow1=null,c.value&&c.value.clearCurrentRow()}if(o.currentRow2){const w=o.tableTargetItems.findIndex(_=>_.name===o.currentRow2.name);o.tableTargetItems.splice(w,1),o.currentRow2=null,p.value&&p.value.clearCurrentRow()}}const J=i({});function He(){const{index:w,sourceName:_,targetName:O,dataType:e,ctrlType:m,desc:R,dictMap:x,defaultValue:Ke,transValue:Ae}=J.value;o.itemMaps[w].sourceName=_,o.itemMaps[w].targetName=O,o.itemMaps[w].dataType=e,o.itemMaps[w].ctrlType=m,o.itemMaps[w].desc=R,o.itemMaps[w].dictMap=x,o.itemMaps[w].defaultValue=Ke,o.itemMaps[w].transValue=Ae}async function B(w,_,O){await d(),await V(),o.itemMaps=[],O.forEach(e=>{const m=o.tableSourceItems.findIndex(x=>x.name===e.sourceName),R=o.tableTargetItems.findIndex(x=>x.name===e.targetName);m>-1&&o.tableSourceItems.splice(m,1),R>-1&&o.tableTargetItems.splice(R,1),o.itemMaps.push({sourceName:e.sourceName,targetName:e.targetName,dataType:e.dataType,ctrlType:e.ctrlType,desc:e.desc,dictMap:e.dictMap,defaultValue:e.defaultValue,transValue:e.transValue})})}async function H(){await d()}async function Y(){await V()}return{...fa(o),sourceTableRef:c,targetTableRef:p,clearSourceTable:$,clearTargetTable:Q,autoMapFlag:h,autoMap:t,handleLink:N,cancelOneMap:T,cancelAllMap:g,intersectionFields:Te,targetHasNoMatch:I,editForm:J,saveEditForm:He,echoData:B,loadSourceFields:H,loadWriterFields:Y,changeStep:M,mapObj:f,getSourceItems:d,getTargetItems:V}}const Wl={name:"gather-item-map",components:{RightTableWrap:Fl,FieldList:$l},props:{modelValue:{type:Array,default:()=>[]},formObj:{type:Object,default:()=>{}},sourceLinkMeta:{type:String,default:""},targetLinkMeta:{type:String,default:""}},emits:["update:modelValue","update:resourceName"],setup(l,{emit:r}){const c=Al(l,r),p=i(!0),o=Se(()=>p.value?"240px":"12px"),f=Se(()=>p.value?"calc(100% - 240px)":"100%");return{leftExpand:p,leftWidth:o,rightWidth:f,toggleLeft:()=>{p.value=!p.value},...c}}},zl={class:"item-map-wrap"},Bl={class:"mapping-wrap"},Hl={class:"reader-wrap"},Gl={class:"writer-wrap"};function Jl(l,r,c,p,o,f){const h=y("field-list"),S=y("right-table-wrap");return k(),L("div",zl,[s("div",Bl,[s("div",Hl,[a(h,{title:"源数据表",fieldTitle:"字段列","source-type":"source","source-name":l.mapObj.nodeTableName,list:l.tableSourceItems,itemMaps:l.itemMaps,onSetting:l.loadSourceFields,onClear:l.clearSourceTable},null,8,["source-name","list","itemMaps","onSetting","onClear"])]),s("div",Gl,[a(h,{title:"目标数据模型",fieldTitle:"字段列","source-type":"target","source-name":l.mapObj.metadataName,list:l.tableTargetItems,itemMaps:l.itemMaps,onSetting:l.loadWriterFields,onNodeDrop:l.handleLink,onClear:l.clearTargetTable,onSingleFieldMapp:r[0]||(r[0]=d=>l.handleLink({source:null,dest:d}))},null,8,["source-name","list","itemMaps","onSetting","onNodeDrop","onClear"])])]),a(S,{tableList1:l.tableList1,tableList2:l.tableList2,itemMaps:l.itemMaps,onAutoMap:l.autoMap,onCancelAllMap:l.cancelAllMap,onCancelOneMap:l.cancelOneMap},null,8,["tableList1","tableList2","itemMaps","onAutoMap","onCancelAllMap","onCancelOneMap"])])}const Kl=Je(Wl,[["render",Jl],["__scopeId","data-v-4d626f60"]]),Pl={class:"p16"},Ql=Ye({name:"StepTask"}),lt=Object.assign(Ql,{setup(l){const r=i({}),c=i(0),p=i(null);va("TaskStep",c);const o=Se(()=>({0:"选择目标数据模型",1:"字段映射",2:"任务设置"})[c.value]),f={taskName:[{required:!0,message:"任务名称必填",trigger:"blur"}],configQueryId:[{required:!0,message:"源节点主键必填",trigger:"blur"}],scheduleConf:[{required:!0,message:"调度方式必填项",trigger:"change"}]};h();function h(){r.value={taskName:"",scheduleConf:oa,scheduleConfStr:ua,configQueryId:"id",itemMap:[],taskDesc:""}}function S(){p.value.changeStep()}function d(){if(!p.value)return;const{targetHasNoMatch:M,itemMaps:$}=p.value;if($.length===0){We.error("请配置字段映射！");return}if(M){We.error("目标资源还有必填字段没有配置映射");return}c.value=2}function V(){We.success("提交！！！")}return(M,$)=>{const Q=y("f-step"),Te=y("f-steps"),I=y("f-card"),t=y("f-form"),N=y("f-collapse-wrap"),g=y("f-button"),T=y("page-container");return k(),E(T,{desc:"将一个冗长或用户不熟悉的表单任务分成多个步骤，分布提交，确保用户操作面板的精简。"},{default:n(()=>[a(I,{bordered:!1,class:"mb-16"},{default:n(()=>[a(Te,{current:c.value,size:"small"},{default:n(()=>[a(Q,{title:"选择目标数据模型"}),a(Q,{title:"字段映射"}),a(Q,{title:"任务设置"}),a(Q,{title:"保存"})]),_:1},8,["current"])]),_:1}),K(s("div",null,[a(Kl,{ref_key:"itemMapRef",ref:p,modelValue:r.value.itemMap,"onUpdate:modelValue":$[0]||($[0]=U=>r.value.itemMap=U),formObj:r.value,"onUpdate:formObj":$[1]||($[1]=U=>r.value=U),sourceLinkMeta:"aaa",targetLinkMeta:"bbb"},null,8,["modelValue","formObj"])],512),[[P,c.value===0||c.value===1]]),K(a(N,{title:o.value},{default:n(()=>[s("div",Pl,[a(t,{ref:"formRef",model:r.value,rules:f,"label-position":"top"},{default:n(()=>[a(bl,{modelValue:r.value,"onUpdate:modelValue":$[2]||($[2]=U=>r.value=U)},null,8,["modelValue"])]),_:1},8,["model"])])]),_:1},8,["title"]),[[P,c.value===2]]),a(I,{flex:"main:right",bordered:!1,class:"mt-16"},{default:n(()=>[c.value===0||c.value===1?(k(),E(g,{key:0,type:"primary",onClick:d},{default:n(()=>[b("下一步")]),_:1})):ye("",!0),c.value===2?(k(),L(oe,{key:1},[a(g,{onClick:S},{default:n(()=>[b("上一步")]),_:1}),a(g,{type:"primary",onClick:V},{default:n(()=>[b("提 交")]),_:1})],64)):ye("",!0)]),_:1})]),_:1})}}});export{lt as default};
