import{k as i,a9 as Je,J as ta,j as Se,D as h,o as C,a as E,w as o,a0 as u,a3 as v,c as a,q as b,F as oe,t as ue,d as s,N as ye,g as U,v as J,b as K,aQ as Ye,ac as na,ad as oa,e as Qe,h as _e,P as ea,p as pa,z as ma,E as fa,C as va,y as ba}from"./vendor-hiTJ0WGS.js";import{a as Ae}from"./chunk-f-ui-one-GbLvu2QU.js";import{i as ga,A as ze,j as aa,k as Pe}from"./index-i4NGkmu1.js";import"./chunk-brace-VHCFl5c9.js";import"./chunk-mockjs-AWbv7-oC.js";const ya=[{key:"tab0",title:"秒"},{key:"tab1",title:"分钟"},{key:"tab2",title:"小时"},{key:"tab3",title:"日"},{key:"tab4",title:"月"},{key:"tab5",title:"周"},{key:"tab6",title:"年"}],ae=i("twitter"),le=i("twitter"),te=i("twitter"),q=i("twitter"),ne=i("twitter"),j=i("notSpecified"),We=i("twitter"),ee=i("tab0"),F=i("*"),he=i(0),pe=i(1),$e=i(0),xe=i(1),se=i([]),A=i("*"),we=i(0),me=i(1),Ne=i(0),Ie=i(1),re=i([]),z=i("*"),Ve=i(0),fe=i(1),Ue=i(0),Le=i(1),ie=i([]),R=i("*"),Oe=i(1),ve=i(2),De=i(1),je=i(1),G=i([]),W=i("*"),Re=i(1),be=i(2),qe=i(1),Ee=i(1),de=i([]),ce=i("?"),ke=i([]),_a=[{key:"2",label:"周一"},{key:"3",label:"周二"},{key:"4",label:"周三"},{key:"5",label:"周四"},{key:"6",label:"周五"},{key:"7",label:"周六"},{key:"1",label:"周日"}],Ce=i("*");function ha(l){switch(l){case"twitter":F.value="*",se.value=[];break;case"facebook":F.value=`${he.value}-${pe.value}`,se.value=[];break;case"github":F.value=`${$e.value}/${xe.value}`,se.value=[];break;case"snapchat":F.value=se.value.sort(function(r,d){return r-d}).join(",");break}}function wa(l){switch(l){case"twitter":A.value="*",re.value=[];break;case"facebook":A.value=`${we.value}-${me.value}`,re.value=[];break;case"github":A.value=`${Ne.value}/${Ie.value}`,re.value=[];break;case"snapchat":A.value=re.value.sort(function(r,d){return r-d}).join(",");break}}function Va(l){switch(l){case"twitter":z.value="*",ie.value=[];break;case"facebook":z.value=`${Ve.value}-${fe.value}`,ie.value=[];break;case"github":z.value=`${Ue.value}/${Le.value}`,ie.value=[];break;case"snapchat":z.value=ie.value.sort(function(r,d){return r-d}).join(",");break}}function ka(l){switch(l){case"twitter":R.value="*",G.value=[];break;case"notSpecified":R.value="?",G.value=[];break;case"facebook":R.value=`${Oe.value}-${ve.value}`,G.value=[];break;case"github":R.value=`${De.value}/${je.value}`,G.value=[];break;case"lastDayOfMonth":R.value="L",G.value=[];break;case"snapchat":R.value=G.value.sort(function(r,d){return r-d}).join(",");break}}function Ca(l){switch(l){case"twitter":W.value="*",de.value=[];break;case"facebook":W.value=`${Re.value}-${be.value}`,de.value=[];break;case"github":W.value=`${qe.value}/${Ee.value}`,de.value=[];break;case"snapchat":W.value=de.value.sort(function(r,d){return r-d}).join(",");break}}function Sa(l){switch(l){case"notSpecified":ce.value="?",ke.value=[];break;case"snapchat":ce.value=ke.value.sort(function(r,d){return r-d}).join(",");break}}function Ta(l){switch(l){case"notSpecified":Ce.value="";break;case"twitter":Ce.value="*";break}}function Me(l){let r="";if(l)return l.indexOf("/")>-1?r="github":l.indexOf("-")>-1?r="facebook":l.indexOf("?")>-1?r="notSpecified":l.indexOf("*")>-1?r="twitter":l.indexOf("L")>-1?r="lastDayOfMonth":(l.indexOf(",")>-1,r="snapchat"),r}function Ge(l,r){switch(r){case"seconds":l+1>pe.value&&(pe.value=l+1);break;case"minutes":l+1>me.value&&(me.value=l+1);break;case"hour":l+1>fe.value&&(fe.value=l+1);break;case"day":l+1>ve.value&&(ve.value=l+1);break;case"month":l+1>be.value&&(be.value=l+1);break}}function Fe(l,r,d,g,n,y,p,S){let m=[];return d=r,l==="github"&&(m=r.split("/"),p=m[0]?Number(m[0]):m[0],S=m[1]?Number(m[1]):m[1]),l==="facebook"&&(m=r.split("-"),n=m[0]?Number(m[0]):m[0],y=m[1]?Number(m[1]):m[1]),l==="snapchat"&&(m=r.split(","),g=[...m]),[d,g,n,y,p,S]}function Ma(l){ae.value=Me(l[0]),le.value=Me(l[1]),te.value=Me(l[2]),q.value=Me(l[3]),ne.value=Me(l[4]),j.value=Me(l[5]),We.value=Me(l[6])?Me(l[6]):"notSpecified";let r=Fe(ae.value,l[0],F.value,se.value,he.value,pe.value,$e.value,xe.value),d=Fe(le.value,l[1],A.value,re.value,we.value,me.value,Ne.value,Ie.value),g=Fe(te.value,l[2],z.value,ie.value,Ve.value,fe.value,Ue.value,Le.value),n=Fe(q.value,l[3],R.value,G.value,Oe.value,ve.value,De.value,je.value),y=Fe(ne.value,l[4],W.value,de.value,Re.value,be.value,qe.value,Ee.value),p=Fe(j.value,l[5],ce.value,ke.value,"","","",""),S=Fe(We.value,l[6],Ce.value);F.value=r[0],se.value=r[1],he.value=r[2],pe.value=r[3],$e.value=r[4],xe.value=r[5],A.value=d[0],re.value=d[1],we.value=d[2],me.value=d[3],Ne.value=d[4],Ie.value=d[5],z.value=g[0],ie.value=g[1],Ve.value=g[2],fe.value=g[3],Ue.value=g[4],Le.value=g[5],R.value=n[0],G.value=n[1],Oe.value=n[2],ve.value=n[3],De.value=n[4],je.value=n[5],W.value=y[0],de.value=y[1],Re.value=y[2],be.value=y[3],qe.value=y[4],Ee.value=y[5],ce.value=p[0],ke.value=p[1],Ce.value=S[0]}function $a(){ae.value="twitter",le.value="twitter",te.value="twitter",q.value="twitter",ne.value="twitter",j.value="notSpecified",We.value="twitter",ee.value="tab0",F.value="*",he.value=0,pe.value=1,$e.value=0,xe.value=1,se.value=[],A.value="*",we.value=0,me.value=1,Ne.value=0,Ie.value=1,re.value=[],z.value="*",Ve.value=0,fe.value=1,Ue.value=0,Le.value=1,ie.value=[],R.value="*",Oe.value=1,ve.value=2,De.value=1,je.value=1,G.value=[],W.value="*",Re.value=1,be.value=2,qe.value=1,Ee.value=1,de.value=[],ce.value="?",ke.value=[],Ce.value="*"}function xa(l){return ga({url:"/task/cron",method:"post",data:{cron:l}})}const M=l=>(na("data-v-43728ae1"),l=l(),oa(),l),Na=M(()=>s("span",null,"每秒允许的通配符[, - * /]",-1)),Ia=M(()=>s("span",null,"周期从",-1)),Ua=M(()=>s("span",null,"从",-1)),La=M(()=>s("span",null,"指定",-1)),Oa=M(()=>s("span",null,"每分允许的通配符[, - * /]",-1)),Da=M(()=>s("span",null,"周期从",-1)),ja=M(()=>s("span",null,"从",-1)),Ra=M(()=>s("span",null,"指定",-1)),qa=M(()=>s("span",null,"00",-1)),Ea=M(()=>s("span",null,"每时允许的通配符[, - * /]",-1)),Fa=M(()=>s("span",null,"周期从",-1)),Aa=M(()=>s("span",null,"从",-1)),za=M(()=>s("span",null,"指定",-1)),Wa=M(()=>s("span",null,"00",-1)),Ba=M(()=>s("span",null,"每日允许的通配符[, - * / ? L]",-1)),Ha=M(()=>s("span",null,"不指定",-1)),Ga=M(()=>s("span",null,"周期从",-1)),Ja=M(()=>s("span",null,"从",-1)),Ka=M(()=>s("span",null,"本月最后一天",-1)),Qa=M(()=>s("span",null,"指定",-1)),Pa={style:{"margin-bottom":"15px",color:"#f5222d"}},Ya=M(()=>s("span",null,"每月允许的通配符[, - * /]",-1)),Xa=M(()=>s("span",null,"周期从",-1)),Za=M(()=>s("span",null,"从",-1)),el=M(()=>s("span",null,"指定",-1)),al=M(()=>s("span",null,"不指定",-1)),ll=M(()=>s("span",null,"指定",-1)),tl={style:{"margin-bottom":"15px",color:"#f5222d"}},nl=M(()=>s("span",null,"每年",-1)),ol=M(()=>s("span",null,"不指定",-1)),ul=M(()=>s("p",{style:{"margin-bottom":"-15px"}},"表达式",-1)),sl=M(()=>s("p",{style:{"margin-bottom":"5px"}},"表达式字段:",-1)),rl=M(()=>s("p",{style:{"margin-top":"15px","margin-bottom":"5px"}},"Cron表达式:",-1)),il={style:{"margin-top":"15px","margin-bottom":"5px"}},dl={class:"runntingTime demo-loading"},cl={class:"footer"},pl=Ye({name:"cron-expressions"}),ml=Object.assign(pl,{emits:["select"],setup(l,{expose:r,emit:d}){const g=d,n=i(!1),y=i([]),p=i(null),S=i(!1);ta([()=>se.value,()=>he.value,()=>pe.value,()=>$e.value,()=>xe.value,()=>re.value,()=>we.value,()=>me.value,()=>Ne.value,()=>Ie.value,()=>ie.value,()=>Ve.value,()=>fe.value,()=>Ue.value,()=>Le.value,()=>G.value,()=>Oe.value,()=>ve.value,()=>De.value,()=>je.value,()=>de.value,()=>Re.value,()=>be.value,()=>qe.value,()=>Ee.value,()=>ke.value],([O,t,N,k,T,Q,P,Y,Be,B,H,c,_,D,$,e,f,I,Ke,He,Xe,ra,ia,da,ca,Ze])=>{ae.value=O.length>0?"snapchat":ae.value,ae.value==="snapchat"&&(F.value=O.sort(function(X,Z){return X-Z}).join(",")),ae.value==="facebook"&&(F.value=`${t}-${N}`),ae.value==="github"&&(F.value=`${k}/${T}`),le.value=Q.length>0?"snapchat":le.value,le.value==="snapchat"&&(A.value=Q.sort(function(X,Z){return X-Z}).join(",")),le.value==="facebook"&&(A.value=`${P}-${Y}`),le.value==="github"&&(A.value=`${Be}/${B}`),te.value=H.length>0?"snapchat":te.value,te.value==="snapchat"&&(z.value=H.sort(function(X,Z){return X-Z}).join(",")),te.value==="facebook"&&(z.value=`${c}-${_}`),te.value==="github"&&(z.value=`${D}/${$}`),q.value=e.length>0?"snapchat":q.value,q.value==="snapchat"&&(R.value=e.sort(function(X,Z){return X-Z}).join(",")),q.value==="facebook"&&(R.value=`${f}-${I}`),q.value==="github"&&(R.value=`${Ke}/${He}`),ne.value=Xe.length>0?"snapchat":ne.value,ne.value==="snapchat"&&(W.value=Xe.sort(function(X,Z){return X-Z}).join(",")),ne.value==="facebook"&&(W.value=`${ra}-${ia}`),ne.value==="github"&&(W.value=`${da}/${ca}`),j.value=Ze.length>0?"snapchat":j.value,j.value==="snapchat"&&(ce.value=Ze.sort(function(X,Z){return X-Z}).join(","))},{immediate:!0});const m=Se(()=>[F.value,A.value,z.value,R.value,W.value,ce.value,Ce.value].join(" ")),V=i(null);function w(){n.value=!1}function x(){L().then(O=>{O?(n.value=!1,g("select",m.value,V.value)):Ae.error("请选择正确的Cron表达式")})}async function L(){S.value=!0;try{const{list:O,scheduleConfStr:t}=await xa(m.value);return p.value=O,V.value=t,S.value=!1,new Promise(N=>N(!0))}catch{return Ae.error("请选择正确的Cron表达式"),S.value=!1,new Promise(t=>t(!1))}}async function ge(O){y.value=O.split(" "),await Ma(y.value),n.value=!0}async function Te(){await $a(),n.value=!1}return r({open:ge}),(O,t)=>{const N=h("f-tabs"),k=h("f-radio"),T=h("f-input-number"),Q=h("f-checkbox"),P=h("f-checkbox-group"),Y=h("f-radio-group"),Be=h("f-divider"),B=h("f-button"),H=h("f-input"),c=h("f-col"),_=h("f-row"),D=h("f-loading"),$=h("f-modal");return C(),E($,{modelValue:n.value,"onUpdate:modelValue":t[48]||(t[48]=e=>n.value=e),width:"1200px","append-to-body":"","destroy-on-close":"","mask-closable":!1,onClosed:Te},{default:o(()=>[a(N,{modelValue:u(ee),"onUpdate:modelValue":t[0]||(t[0]=e=>v(ee)?ee.value=e:null),data:u(ya)},null,8,["modelValue","data"]),K(s("div",null,[a(Y,{modelValue:u(ae),"onUpdate:modelValue":t[7]||(t[7]=e=>v(ae)?ae.value=e:null),onChange:u(ha)},{default:o(()=>[a(k,{label:"twitter",disabled:""},{default:o(()=>[Na]),_:1}),a(k,{label:"facebook"},{default:o(()=>[Ia,a(T,{max:58,min:0,modelValue:u(he),"onUpdate:modelValue":t[1]||(t[1]=e=>v(he)?he.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus",onChange:t[2]||(t[2]=e=>u(Ge)(e,"seconds"))},null,8,["modelValue"]),b(" — "),a(T,{max:59,min:u(he)+1,modelValue:u(pe),"onUpdate:modelValue":t[3]||(t[3]=e=>v(pe)?pe.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["min","modelValue"]),b(" 秒 ")]),_:1}),a(k,{label:"github"},{default:o(()=>[Ua,a(T,{max:59,min:0,modelValue:u($e),"onUpdate:modelValue":t[4]||(t[4]=e=>v($e)?$e.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 秒开始,每 "),a(T,{max:59,min:1,modelValue:u(xe),"onUpdate:modelValue":t[5]||(t[5]=e=>v(xe)?xe.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 秒执行一次 ")]),_:1}),a(k,{label:"snapchat",class:"checkbox"},{default:o(()=>[La,a(P,{modelValue:u(se),"onUpdate:modelValue":t[6]||(t[6]=e=>v(se)?se.value=e:null)},{default:o(()=>[(C(),U(oe,null,ye(60,(e,f)=>a(Q,{label:f.toString(),key:f},{default:o(()=>[s("span",null,ue(10>f?"0"+f:f),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","onChange"])],512),[[J,u(ee)==="tab0"]]),K(s("div",null,[a(Y,{modelValue:u(le),"onUpdate:modelValue":t[14]||(t[14]=e=>v(le)?le.value=e:null),onChange:u(wa)},{default:o(()=>[a(k,{label:"twitter",disabled:""},{default:o(()=>[Oa]),_:1}),a(k,{label:"facebook"},{default:o(()=>[Da,a(T,{max:58,min:0,modelValue:u(we),"onUpdate:modelValue":t[8]||(t[8]=e=>v(we)?we.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus",onChange:t[9]||(t[9]=e=>u(Ge)(e,"minutes"))},null,8,["modelValue"]),b(" — "),a(T,{max:59,min:u(we)+1,modelValue:u(me),"onUpdate:modelValue":t[10]||(t[10]=e=>v(me)?me.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["min","modelValue"]),b(" 分 ")]),_:1}),a(k,{label:"github"},{default:o(()=>[ja,a(T,{max:59,min:0,modelValue:u(Ne),"onUpdate:modelValue":t[11]||(t[11]=e=>v(Ne)?Ne.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 分开始,每 "),a(T,{max:59,min:1,modelValue:u(Ie),"onUpdate:modelValue":t[12]||(t[12]=e=>v(Ie)?Ie.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 分执行一次 ")]),_:1}),a(k,{label:"snapchat",class:"checkbox"},{default:o(()=>[Ra,a(P,{modelValue:u(re),"onUpdate:modelValue":t[13]||(t[13]=e=>v(re)?re.value=e:null)},{default:o(()=>[qa,(C(),U(oe,null,ye(60,(e,f)=>a(Q,{label:f.toString(),key:f},{default:o(()=>[s("span",null,ue(10>f?"0"+f:f),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","onChange"])],512),[[J,u(ee)==="tab1"]]),K(s("div",null,[a(Y,{modelValue:u(te),"onUpdate:modelValue":t[21]||(t[21]=e=>v(te)?te.value=e:null),onChange:u(Va)},{default:o(()=>[a(k,{label:"twitter"},{default:o(()=>[Ea]),_:1}),a(k,{label:"facebook"},{default:o(()=>[Fa,a(T,{max:22,min:0,modelValue:u(Ve),"onUpdate:modelValue":t[15]||(t[15]=e=>v(Ve)?Ve.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus",onChange:t[16]||(t[16]=e=>u(Ge)(e,"hour"))},null,8,["modelValue"]),b(" — "),a(T,{max:23,min:u(Ve)+1,modelValue:u(fe),"onUpdate:modelValue":t[17]||(t[17]=e=>v(fe)?fe.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["min","modelValue"]),b(" 小时 ")]),_:1}),a(k,{label:"github"},{default:o(()=>[Aa,a(T,{max:23,min:0,modelValue:u(Ue),"onUpdate:modelValue":t[18]||(t[18]=e=>v(Ue)?Ue.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 小时开始,每 "),a(T,{max:23,min:1,modelValue:u(Le),"onUpdate:modelValue":t[19]||(t[19]=e=>v(Le)?Le.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 小时执行一次 ")]),_:1}),a(k,{label:"snapchat",class:"checkbox"},{default:o(()=>[za,a(P,{modelValue:u(ie),"onUpdate:modelValue":t[20]||(t[20]=e=>v(ie)?ie.value=e:null)},{default:o(()=>[Wa,(C(),U(oe,null,ye(24,(e,f)=>a(Q,{label:f.toString(),key:f},{default:o(()=>[s("span",null,ue(10>f?"0"+f:f),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","onChange"])],512),[[J,u(ee)==="tab2"]]),K(s("div",null,[a(Y,{modelValue:u(q),"onUpdate:modelValue":t[28]||(t[28]=e=>v(q)?q.value=e:null),onChange:u(ka)},{default:o(()=>[a(k,{label:"twitter",disabled:u(j)==="snapchat"},{default:o(()=>[Ba]),_:1},8,["disabled"]),a(k,{label:"notSpecified"},{default:o(()=>[Ha]),_:1}),a(k,{label:"facebook",disabled:u(j)==="snapchat"},{default:o(()=>[Ga,a(T,{max:30,min:1,modelValue:u(Oe),"onUpdate:modelValue":t[22]||(t[22]=e=>v(Oe)?Oe.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus",onChange:t[23]||(t[23]=e=>u(Ge)(e,"day"))},null,8,["modelValue"]),b(" — "),a(T,{max:31,min:2,modelValue:u(ve),"onUpdate:modelValue":t[24]||(t[24]=e=>v(ve)?ve.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 日 ")]),_:1},8,["disabled"]),a(k,{label:"github",disabled:u(j)==="snapchat"},{default:o(()=>[Ja,a(T,{max:31,min:1,modelValue:u(De),"onUpdate:modelValue":t[25]||(t[25]=e=>v(De)?De.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 日开始,每 "),a(T,{max:31,min:1,modelValue:u(je),"onUpdate:modelValue":t[26]||(t[26]=e=>v(je)?je.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 天执行一次 ")]),_:1},8,["disabled"]),a(k,{label:"lastDayOfMonth",disabled:u(j)==="snapchat"},{default:o(()=>[Ka]),_:1},8,["disabled"]),a(k,{label:"snapchat",class:"checkbox",disabled:u(j)==="snapchat"},{default:o(()=>[Qa,a(P,{modelValue:u(G),"onUpdate:modelValue":t[27]||(t[27]=e=>v(G)?G.value=e:null)},{default:o(()=>[(C(),U(oe,null,ye(31,(e,f)=>a(Q,{label:e.toString(),key:f,disabled:u(j)==="snapchat"},{default:o(()=>[s("span",null,ue(10>e?"0"+e:e),1)]),_:2},1032,["label","disabled"])),64))]),_:1},8,["modelValue"])]),_:1},8,["disabled"])]),_:1},8,["modelValue","onChange"]),K(s("p",Pa," 日和周不能同时指定 ",512),[[J,u(j)==="snapchat"]])],512),[[J,u(ee)==="tab3"]]),K(s("div",null,[a(Y,{modelValue:u(ne),"onUpdate:modelValue":t[35]||(t[35]=e=>v(ne)?ne.value=e:null),onChange:u(Ca)},{default:o(()=>[a(k,{label:"twitter"},{default:o(()=>[Ya]),_:1}),a(k,{label:"facebook"},{default:o(()=>[Xa,a(T,{max:11,min:1,modelValue:u(Re),"onUpdate:modelValue":t[29]||(t[29]=e=>v(Re)?Re.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus",onChange:t[30]||(t[30]=e=>u(Ge)(e,"month"))},null,8,["modelValue"]),b(" — "),a(T,{max:12,min:2,modelValue:u(be),"onUpdate:modelValue":t[31]||(t[31]=e=>v(be)?be.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 月 ")]),_:1}),a(k,{label:"github"},{default:o(()=>[Za,a(T,{max:12,min:1,modelValue:u(qe),"onUpdate:modelValue":t[32]||(t[32]=e=>v(qe)?qe.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 月开始,每 "),a(T,{max:12,min:1,modelValue:u(Ee),"onUpdate:modelValue":t[33]||(t[33]=e=>v(Ee)?Ee.value=e:null),"arrow-up-icon":"plus","arrow-down-icon":"minus"},null,8,["modelValue"]),b(" 月执行一次 ")]),_:1}),a(k,{label:"snapchat",class:"checkbox"},{default:o(()=>[el,a(P,{modelValue:u(de),"onUpdate:modelValue":t[34]||(t[34]=e=>v(de)?de.value=e:null)},{default:o(()=>[(C(),U(oe,null,ye(12,(e,f)=>a(Q,{label:e.toString(),key:f},{default:o(()=>[s("span",null,ue(e),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","onChange"])],512),[[J,u(ee)==="tab4"]]),K(s("div",null,[a(Y,{modelValue:u(j),"onUpdate:modelValue":t[37]||(t[37]=e=>v(j)?j.value=e:null),onChange:u(Sa)},{default:o(()=>[a(k,{label:"notSpecified"},{default:o(()=>[al]),_:1}),a(k,{label:"snapchat",class:"checkbox",disabled:u(q)!=="notSpecified"},{default:o(()=>[ll,a(P,{modelValue:u(ke),"onUpdate:modelValue":t[36]||(t[36]=e=>v(ke)?ke.value=e:null)},{default:o(()=>[(C(!0),U(oe,null,ye(u(_a),(e,f)=>(C(),E(Q,{label:e.key,key:f,disabled:u(q)!=="notSpecified"},{default:o(()=>[s("span",null,ue(e.label),1)]),_:2},1032,["label","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["disabled"])]),_:1},8,["modelValue","onChange"]),K(s("p",tl," 日和周不能同时指定 ",512),[[J,u(q)!=="notSpecified"]])],512),[[J,u(ee)==="tab5"]]),K(s("div",null,[a(Y,{modelValue:u(We),"onUpdate:modelValue":t[38]||(t[38]=e=>v(We)?We.value=e:null),onChange:u(Ta)},{default:o(()=>[a(k,{label:"twitter"},{default:o(()=>[nl]),_:1}),a(k,{label:"notSpecified"},{default:o(()=>[ol]),_:1})]),_:1},8,["modelValue","onChange"])],512),[[J,u(ee)==="tab6"]]),ul,a(Be),sl,a(_,{gutter:20,class:"gutter"},{default:o(()=>[a(c,{span:"4"},{default:o(()=>[a(H,{placeholder:"*",modelValue:u(F),"onUpdate:modelValue":t[39]||(t[39]=e=>v(F)?F.value=e:null),style:{width:"auto"},readonly:""},{append:o(()=>[a(B,null,{default:o(()=>[b("秒")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(c,{span:"4"},{default:o(()=>[a(H,{placeholder:"*",modelValue:u(A),"onUpdate:modelValue":t[40]||(t[40]=e=>v(A)?A.value=e:null),style:{width:"auto"},readonly:""},{append:o(()=>[a(B,null,{default:o(()=>[b("分")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(c,{span:"4"},{default:o(()=>[a(H,{placeholder:"*",modelValue:u(z),"onUpdate:modelValue":t[41]||(t[41]=e=>v(z)?z.value=e:null),style:{width:"auto"},readonly:""},{append:o(()=>[a(B,null,{default:o(()=>[b("时")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(c,{span:"3"},{default:o(()=>[a(H,{placeholder:"*",modelValue:u(R),"onUpdate:modelValue":t[42]||(t[42]=e=>v(R)?R.value=e:null),style:{width:"auto"},readonly:""},{append:o(()=>[a(B,null,{default:o(()=>[b("日")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(c,{span:"3"},{default:o(()=>[a(H,{placeholder:"*",modelValue:u(W),"onUpdate:modelValue":t[43]||(t[43]=e=>v(W)?W.value=e:null),style:{width:"auto"},readonly:""},{append:o(()=>[a(B,null,{default:o(()=>[b("月")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(c,{span:"3"},{default:o(()=>[a(H,{placeholder:"?",modelValue:u(ce),"onUpdate:modelValue":t[44]||(t[44]=e=>v(ce)?ce.value=e:null),style:{width:"auto"},readonly:""},{append:o(()=>[a(B,null,{default:o(()=>[b("周")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(c,{span:"3"},{default:o(()=>[a(H,{modelValue:u(Ce),"onUpdate:modelValue":t[45]||(t[45]=e=>v(Ce)?Ce.value=e:null),style:{width:"auto"},readonly:""},{append:o(()=>[a(B,null,{default:o(()=>[b("年")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),rl,a(H,{modelValue:m.value,"onUpdate:modelValue":t[46]||(t[46]=e=>m.value=e),readonly:"",class:"input-item"},null,8,["modelValue"]),s("p",il,[a(ze,{type:"success",onClick:t[47]||(t[47]=e=>L())},{default:o(()=>[b("测试")]),_:1}),b(" 最近运行10次时间: ")]),s("ul",dl,[(C(!0),U(oe,null,ye(p.value,(e,f)=>(C(),U("li",{key:f},ue(e),1))),128)),K(a(D,{fix:""},null,512),[[J,S.value]])]),s("div",cl,[a(B,{size:"large",onClick:w},{default:o(()=>[b("取消")]),_:1}),a(B,{type:"primary",size:"large",onClick:x},{default:o(()=>[b("确定")]),_:1})])]),_:1},8,["modelValue"])}}}),fl=Je(ml,[["__scopeId","data-v-43728ae1"]]),ua="0 0 9 * * ? ",sa="每天9点0分0秒执行一次",vl=Ye({name:"cron-expression-modal"}),bl=Object.assign(vl,{props:{scheduleConf:{type:String,default:ua},isCreate:{type:Boolean,default:!0},scheduleConfStr:{type:String,default:sa}},emits:["update:scheduleConf","update:scheduleConfStr"],setup(l,{expose:r,emit:d}){const g=d,n=l,y=i(null),p=i(null);function S(){y.value&&y.value.open(n.scheduleConf,n.isCreate)}function m(V,w){p.value=w,g("update:scheduleConf",V),g("update:scheduleConfStr",w)}return ta(()=>n.scheduleConfStr,V=>{p.value=V},{immediate:!0}),r({handleOpen:S}),(V,w)=>{const x=h("f-button"),L=h("f-input");return C(),U("div",null,[a(L,{readonly:"","model-value":p.value},{append:o(()=>[a(x,{background:"",onClick:S},{default:o(()=>[b("选择")]),_:1})]),_:1},8,["model-value"]),a(fl,{ref_key:"cronRef",ref:y,onSelect:m},null,512)])}}}),gl={__name:"basicTasks",props:{modelValue:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(l,{emit:r}){const d=l,g=r,n=Se({get:()=>d.modelValue,set:y=>g("update:modelValue",y)});return(y,p)=>{const S=h("f-input"),m=h("f-form-item"),V=h("f-col"),w=h("f-row");return C(),U(oe,null,[a(w,{gutter:16},{default:o(()=>[a(V,{span:8},{default:o(()=>[a(m,{label:"任务名称",prop:"taskName"},{default:o(()=>[a(S,{modelValue:n.value.taskName,"onUpdate:modelValue":p[0]||(p[0]=x=>n.value.taskName=x),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(V,{span:"8"},{default:o(()=>[a(m,{label:"调度策略",prop:"scheduleConf"},{default:o(()=>[a(bl,{scheduleConf:n.value.scheduleConf,"onUpdate:scheduleConf":p[1]||(p[1]=x=>n.value.scheduleConf=x),scheduleConfStr:n.value.scheduleConfStr,"onUpdate:scheduleConfStr":p[2]||(p[2]=x=>n.value.scheduleConfStr=x)},null,8,["scheduleConf","scheduleConfStr"])]),_:1})]),_:1})]),_:1}),a(m,{label:"描述"},{default:o(()=>[a(S,{modelValue:n.value.taskDesc,"onUpdate:modelValue":p[3]||(p[3]=x=>n.value.taskDesc=x),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})],64)}}},yl={class:"ef-node-left-ico flow-node-drag"},_l=["title"],hl={__name:"field-node",props:{node:{type:Object,default:()=>({})},icon:{type:String,default:"index"},type:{type:String,default:"primary"},required:{type:Boolean},sourceType:{type:String,default:"source"}},emits:["singleFieldMapping"],setup(l,{emit:r}){const d=r,g=i(null),n=Se(()=>["ef-node-container","el-node-info","info"]);return(y,p)=>{const S=h("f-tag"),m=h("f-button"),V=h("f-input");return C(),U("div",{ref_key:"nodeRef",ref:g,class:Qe(n.value),allowdrop:""},[s("div",{class:Qe(["ef-node-left","info"])}),s("div",yl,[s("i",{class:Qe(`f-iconfont f-icon-${l.icon}`)},null,2)]),s("div",{class:"ef-node-text node-edit",title:l.node.name},[a(S,{type:l.required?"danger":"default",dot:"",title:l.required?"必填项":"非必填"},null,8,["type","title"]),l.sourceType==="target"?(C(),E(V,{key:0,"model-value":l.node.name,size:"small",readonly:""},{append:o(()=>[a(m,{size:"small",type:"text",title:"单字段映射",onClick:p[0]||(p[0]=w=>d("singleFieldMapping"))},{default:o(()=>[b(" 映射 ")]),_:1})]),_:1},8,["model-value"])):(C(),E(V,{key:1,"model-value":l.node.name,size:"small",readonly:""},null,8,["model-value"]))],8,_l)],2)}}},la=Je(hl,[["__scopeId","data-v-173ace18"]]),wl={flex:"cross:center"},Vl={class:"list-wrap"},kl={class:"pt-16 pl-8 pr-8 pb-16",flex:""},Cl={style:{color:"#8a92a6"},class:"table-name ml-8"},Sl={class:"list-inner"},Tl={class:"pl-8 pr-8",allowdrop:""},Ml={key:0,class:"list-empty"},$l={class:"table-bottom"},xl={__name:"field-list",props:{title:{type:String,default:"标题"},sourceName:{type:String},sourceType:{type:String,default:"source"},list:{type:Array,default:()=>[]},disabledKeys:{type:Array,default:()=>[]},fieldTitle:{type:String,default:""},noDataWarn:{type:String,default:"请先配置选择数据源"},itemMaps:{type:Array,default:()=>[]}},emits:["setting","node-drop","clear","singleFieldMapp"],setup(l,{emit:r}){const d=r;function g(V,w){V.dataTransfer.setData("node",JSON.stringify(w))}function n(V,w){V.dataTransfer.setData("destnode",JSON.stringify(w))}function y(V,w){V.preventDefault();let x=V.dataTransfer.getData("node"),L={};try{L=JSON.parse(x)}catch{console.log("drag data is not right json!");return}V.target.getAttribute("allowdrop")!==null&&V.target.toggleAttribute("over",!1),d("node-drop",{source:L,dest:w,ev:V})}let p=null;function S(V){p&&p.toggleAttribute("over",!1);const w=V.target.closest("[allowdrop]");w&&(w.toggleAttribute("over",!0),p=w)}function m(V){V.target.getAttribute("allowdrop")!==null&&V.target.toggleAttribute("over",!1)}return(V,w)=>{const x=h("f-button"),L=h("f-icon"),ge=h("f-empty"),Te=h("f-scrollbar"),O=h("f-collapse-wrap");return C(),E(O,{title:l.title,shadow:"none"},{right:o(()=>[s("div",wl,[l.sourceName?(C(),E(x,{key:0,type:l.sourceType==="source"?"primary":"success",style:{"margin-right":"4px",width:"130px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"inline-block"},title:l.sourceName,size:"small",plain:""},{default:o(()=>[b(ue(l.sourceName),1)]),_:1},8,["type","title"])):_e("",!0),a(L,{name:"setting",type:"button",onClick:w[0]||(w[0]=()=>d("setting"))})])]),default:o(()=>[s("div",Vl,[s("div",kl,[a(L,{name:"menu"}),s("a",Cl,ue(l.fieldTitle),1)]),s("div",Sl,[a(Te,null,{default:o(()=>[s("div",Tl,[l.sourceType==="source"?(C(),E(ea,{key:0,tag:"div",name:"fade"},{default:o(()=>[(C(!0),U(oe,null,ye(l.list,t=>(C(),E(la,{key:t.name,node:t,required:t.required,type:l.sourceType==="source"?"primary":"success",icon:l.sourceType==="source"?"send":"aim",draggable:l.sourceType==="source",onDragstart:N=>g(N,t)},null,8,["node","required","type","icon","draggable","onDragstart"]))),128))]),_:1})):_e("",!0),l.sourceType==="target"?(C(),E(ea,{key:1,tag:"div",name:"fade"},{default:o(()=>[(C(!0),U(oe,null,ye(l.list,t=>(C(),E(la,{key:t.name,node:t,required:t.required,type:l.sourceType==="source"?"primary":"success",icon:l.sourceType==="source"?"send":"aim",draggable:!0,sourceType:l.sourceType,onSingleFieldMapping:()=>d("singleFieldMapp",t),onDragstart:N=>n(N,t),onDragover:w[1]||(w[1]=pa(()=>{},["prevent"])),onDrop:N=>y(N,t),onDragenter:N=>S(N,t),onDragleave:N=>m(N,t)},null,8,["node","required","type","icon","sourceType","onSingleFieldMapping","onDragstart","onDrop","onDragenter","onDragleave"]))),128))]),_:1})):_e("",!0)]),l.list.length===0&&l.itemMaps.length===0?(C(),U("div",Ml,[a(ge,null,{default:o(()=>[b(ue(l.noDataWarn),1)]),_:1})])):_e("",!0)]),_:1})]),s("p",$l,[l.sourceType==="source"?(C(),E(ze,{key:0,type:"text",icon:"delete",color:"danger",confirm:"",message:"清空信息项会重置已配置的内容！",onClick:w[2]||(w[2]=()=>d("clear"))})):_e("",!0),l.sourceType==="target"?(C(),E(ze,{key:1,type:"text",icon:"delete",color:"danger",confirm:"",message:"清空信息项会重置已配置的内容！",onClick:w[3]||(w[3]=()=>d("clear"))})):_e("",!0)])])]),_:1},8,["title"])}}},Nl=Je(xl,[["__scopeId","data-v-b4240279"]]),Il=l=>(na("data-v-33a41de0"),l=l(),oa(),l),Ul={class:"right-table-wrap"},Ll={class:"inner-box"},Ol={class:"map-res"},Dl={class:"table-title"},jl=Il(()=>s("div",{class:"map-title"},"映射关系",-1)),Rl={key:0,class:"ctrl"},ql={class:"p16"},El=["title"],Fl={__name:"right-table-wrap",props:{tableList1:{type:Array,default:()=>[]},tableList2:{type:Array,default:()=>[]},itemMaps:{type:Array,default:()=>[]}},emits:["autoMap","cancelAllMap","cancelOneMap"],setup(l,{emit:r}){const d=r,g=i([{title:"源信息项",key:"sourceName",minWidth:140},{title:"目标信息项",slot:"targetName",minWidth:140},{title:"操作",slot:"action",width:100}]);return(n,y)=>{const p=h("f-table");return C(),U("div",Ul,[s("div",Ll,[s("div",Ol,[s("div",Dl,[jl,l.tableList1.length&&l.tableList2.length?(C(),U("div",Rl,[a(ze,{type:"text",tooltip:"自动映射",confirm:"",message:"自动映射会取消已添加的映射！",onClick:y[0]||(y[0]=()=>d("autoMap"))},{default:o(()=>[b(" 自动映射 ")]),_:1}),a(ze,{type:"text",tooltip:"全部重置",confirm:"",message:"确定重置吗！",onClick:y[1]||(y[1]=()=>d("cancelAllMap"))},{default:o(()=>[b(" 重置映射 ")]),_:1})])):_e("",!0)]),s("div",ql,[a(p,{columns:g.value,data:l.itemMaps,"max-height":"500",size:"small","disabled-hover":"",border:""},{targetName:o(({row:S})=>[s("span",{title:S.desc},ue(S.targetName),9,El)]),action:o(({row:S,index:m})=>[a(ze,{type:"text",icon:"minus-circle",color:"danger",tooltip:"移除",onClick:()=>d("cancelOneMap",S,m)},null,8,["onClick"])]),_:1},8,["columns","data"])])])])])}}},Al=Je(Fl,[["__scopeId","data-v-33a41de0"]]);function zl(l,r){const d=i(null),g=i(null),n=ma({tableSourceData:{},tableSourceItems:[],tableTargetData:{},tableTargetItems:[],tableList1:[],tableList2:[],completeFields:[],itemMaps:[],currentRow1Index:-1,currentRow1:null,currentRow2:null}),y=Se({get:()=>l.formObj,set:c=>r("update:formObj",c)});let p=i(!0);const S=fa("TaskStep"),m=async()=>{n.tableSourceData={tableName:"aaa"},y.value.nodeTableName="aaa",w(),n.tableSourceItems=[{name:"id",desc:null,required:!0,dataType:"varchar"},{name:"update_date",desc:null,required:!0,dataType:"timestamp"},{name:"name",desc:null,required:!1,dataType:"varchar"},{name:"age",desc:null,required:!1,dataType:"int2"},{name:"sex",desc:null,required:!1,dataType:"varchar"}],n.tableList1=Pe(n.tableSourceItems)},V=async()=>{y.value.metadataName="bbb",w(),n.tableTargetItems=[{name:"js_id",desc:"教师编号",required:!0,dataType:"varchar"},{name:"js_name",desc:"教师姓名",required:!0,dataType:"varchar"},{name:"bz",desc:"备注",required:!1,dataType:"varchar"},{name:"qhdm",desc:"区划代码",required:!1,dataType:"varchar"},{name:"birthday",desc:"出生日期",required:!1,dataType:"varchar"}],n.tableList2=Pe(n.tableTargetItems)};function w(){S.value=0,n.tableSourceData.tableName&&(S.value=1)}function x(){n.tableSourceData={},n.tableSourceItems=[],n.tableList1=[],y.value.nodeTableName="",N()}function L(){n.tableTargetData={},n.tableTargetItems=[],n.tableList2=[],y.value.metadataName="",N()}const ge=Se(()=>{if(aa(n.tableSourceItems)||aa(n.tableTargetItems))return[];const c=n.tableSourceItems.map(I=>I.name),_=n.tableTargetItems.map(I=>I.name);let D=[];_.forEach(I=>D.push(I.toLowerCase()));let $=c.filter(I=>D.includes(I.toLowerCase())),e=[],f=[];$.forEach(I=>{e.push(I.toLowerCase())});for(let I=0;I<$.length;I++)e.filter(He=>He===$[I].toLowerCase()).length===1&&f.push($[I]);return f}),Te=Se(()=>!!n.tableTargetItems.find(c=>c.required));function O(){n.completeFields=Pe(n.itemMaps),p.value=!0,n.itemMaps.find(_=>_.sourceName==="")&&N(),n.itemMaps=n.itemMaps.filter(_=>_.sourceName!==""),ge.value.forEach(_=>{const D=n.tableSourceItems.findIndex(f=>{if(f.name.toLowerCase()===_.toLowerCase())return f}),$=n.tableTargetItems.findIndex(f=>{if(f.name.toLowerCase()===_.toLowerCase())return f}),e=n.tableTargetItems[$];n.itemMaps.push({sourceName:_,targetName:e.name,dataType:e==null?void 0:e.dataType,ctrlType:e==null?void 0:e.ctrlType,desc:e==null?void 0:e.desc,dictMap:[],defaultValue:"",transValue:""}),D!==-1&&n.tableSourceItems.splice(D,1),$!==-1&&n.tableTargetItems.splice($,1)}),Ae.success("自动映射执行完毕!")}function t({source:c,dest:_}){n.currentRow1=c,n.currentRow2=_,n.itemMaps.push({sourceName:c?c.name:"",targetName:_.name,dataType:_==null?void 0:_.dataType,ctrlType:_==null?void 0:_.ctrlType,desc:_==null?void 0:_.desc,dictMap:[],defaultValue:"",transValue:""}),Q(),w()}function N(){n.itemMaps.forEach((c,_)=>{T(c.sourceName,c.targetName)}),n.itemMaps=[],w(),p.value=!1}function k(c,_){T(c.sourceName,c.targetName),n.itemMaps.splice(_,1),p.value=!1}function T(c,_){const D=n.tableList1.find(e=>e.name.toLowerCase()===c.toLowerCase()),$=n.tableList2.find(e=>e.name.toLowerCase()===_.toLowerCase());D&&n.tableSourceItems.unshift(D),$&&n.tableTargetItems.unshift($)}function Q(){if(n.currentRow1){const c=n.tableSourceItems.findIndex(_=>_.name===n.currentRow1.name);n.tableSourceItems.splice(c,1),n.currentRow1Index=-1,n.currentRow1=null,d.value&&d.value.clearCurrentRow()}if(n.currentRow2){const c=n.tableTargetItems.findIndex(_=>_.name===n.currentRow2.name);n.tableTargetItems.splice(c,1),n.currentRow2=null,g.value&&g.value.clearCurrentRow()}}const P=i({});function Y(){const{index:c,sourceName:_,targetName:D,dataType:$,ctrlType:e,desc:f,dictMap:I,defaultValue:Ke,transValue:He}=P.value;n.itemMaps[c].sourceName=_,n.itemMaps[c].targetName=D,n.itemMaps[c].dataType=$,n.itemMaps[c].ctrlType=e,n.itemMaps[c].desc=f,n.itemMaps[c].dictMap=I,n.itemMaps[c].defaultValue=Ke,n.itemMaps[c].transValue=He}async function Be(c,_,D){await m(),await V(),n.itemMaps=[],D.forEach($=>{const e=n.tableSourceItems.findIndex(I=>I.name===$.sourceName),f=n.tableTargetItems.findIndex(I=>I.name===$.targetName);e>-1&&n.tableSourceItems.splice(e,1),f>-1&&n.tableTargetItems.splice(f,1),n.itemMaps.push({sourceName:$.sourceName,targetName:$.targetName,dataType:$.dataType,ctrlType:$.ctrlType,desc:$.desc,dictMap:$.dictMap,defaultValue:$.defaultValue,transValue:$.transValue})})}async function B(){await m()}async function H(){await V()}return{...va(n),sourceTableRef:d,targetTableRef:g,clearSourceTable:x,clearTargetTable:L,autoMapFlag:p,autoMap:O,handleLink:t,cancelOneMap:k,cancelAllMap:N,intersectionFields:ge,targetHasNoMatch:Te,editForm:P,saveEditForm:Y,echoData:Be,loadSourceFields:B,loadWriterFields:H,changeStep:w,mapObj:y,getSourceItems:m,getTargetItems:V}}const Wl={name:"gather-item-map",components:{RightTableWrap:Al,FieldList:Nl},props:{modelValue:{type:Array,default:()=>[]},formObj:{type:Object,default:()=>{}},sourceLinkMeta:{type:String,default:""},targetLinkMeta:{type:String,default:""}},emits:["update:modelValue","update:resourceName"],setup(l,{emit:r}){const d=zl(l,r),g=i(!0),n=Se(()=>g.value?"240px":"12px"),y=Se(()=>g.value?"calc(100% - 240px)":"100%");return{leftExpand:g,leftWidth:n,rightWidth:y,toggleLeft:()=>{g.value=!g.value},...d}}},Bl={class:"item-map-wrap"},Hl={class:"mapping-wrap"},Gl={class:"reader-wrap"},Jl={class:"writer-wrap"};function Kl(l,r,d,g,n,y){const p=h("field-list"),S=h("right-table-wrap");return C(),U("div",Bl,[s("div",Hl,[s("div",Gl,[a(p,{title:"源数据表",fieldTitle:"字段列","source-type":"source","source-name":l.mapObj.nodeTableName,list:l.tableSourceItems,itemMaps:l.itemMaps,onSetting:l.loadSourceFields,onClear:l.clearSourceTable},null,8,["source-name","list","itemMaps","onSetting","onClear"])]),s("div",Jl,[a(p,{title:"目标数据模型",fieldTitle:"字段列","source-type":"target","source-name":l.mapObj.metadataName,list:l.tableTargetItems,itemMaps:l.itemMaps,onSetting:l.loadWriterFields,onNodeDrop:l.handleLink,onClear:l.clearTargetTable,onSingleFieldMapp:r[0]||(r[0]=m=>l.handleLink({source:null,dest:m}))},null,8,["source-name","list","itemMaps","onSetting","onNodeDrop","onClear"])])]),a(S,{tableList1:l.tableList1,tableList2:l.tableList2,itemMaps:l.itemMaps,onAutoMap:l.autoMap,onCancelAllMap:l.cancelAllMap,onCancelOneMap:l.cancelOneMap},null,8,["tableList1","tableList2","itemMaps","onAutoMap","onCancelAllMap","onCancelOneMap"])])}const Ql=Je(Wl,[["render",Kl],["__scopeId","data-v-4d626f60"]]),Pl={class:"p16"},Yl=Ye({name:"StepTask"}),tt=Object.assign(Yl,{setup(l){const r=i({}),d=i(0),g=i(null);ba("TaskStep",d);const n=Se(()=>({0:"选择目标数据模型",1:"字段映射",2:"任务设置"})[d.value]),y={taskName:[{required:!0,message:"任务名称必填",trigger:"blur"}],configQueryId:[{required:!0,message:"源节点主键必填",trigger:"blur"}],scheduleConf:[{required:!0,message:"调度方式必填项",trigger:"change"}]};p();function p(){r.value={taskName:"",scheduleConf:ua,scheduleConfStr:sa,configQueryId:"id",itemMap:[],taskDesc:""}}function S(){g.value.changeStep()}function m(){if(!g.value)return;const{targetHasNoMatch:w,itemMaps:x}=g.value;if(x.length===0){Ae.error("请配置字段映射！");return}if(w){Ae.error("目标资源还有必填字段没有配置映射");return}d.value=2}function V(){Ae.success("提交！！！")}return(w,x)=>{const L=h("f-step"),ge=h("f-steps"),Te=h("f-card"),O=h("f-form"),t=h("f-collapse-wrap"),N=h("f-button"),k=h("page-container");return C(),E(k,{desc:"将一个冗长或用户不熟悉的表单任务分成多个步骤，分布提交，确保用户操作面板的精简。"},{default:o(()=>[a(Te,{bordered:!1,class:"mb-16"},{default:o(()=>[a(ge,{current:d.value,size:"small"},{default:o(()=>[a(L,{title:"选择目标数据模型"}),a(L,{title:"字段映射"}),a(L,{title:"任务设置"}),a(L,{title:"保存"})]),_:1},8,["current"])]),_:1}),K(s("div",null,[a(Ql,{ref_key:"itemMapRef",ref:g,modelValue:r.value.itemMap,"onUpdate:modelValue":x[0]||(x[0]=T=>r.value.itemMap=T),formObj:r.value,"onUpdate:formObj":x[1]||(x[1]=T=>r.value=T),sourceLinkMeta:"aaa",targetLinkMeta:"bbb"},null,8,["modelValue","formObj"])],512),[[J,d.value===0||d.value===1]]),K(a(t,{title:n.value},{default:o(()=>[s("div",Pl,[a(O,{ref:"formRef",model:r.value,rules:y,"label-position":"top"},{default:o(()=>[a(gl,{modelValue:r.value,"onUpdate:modelValue":x[2]||(x[2]=T=>r.value=T)},null,8,["modelValue"])]),_:1},8,["model"])])]),_:1},8,["title"]),[[J,d.value===2]]),a(Te,{flex:"main:right",bordered:!1,class:"mt-16"},{default:o(()=>[d.value===0||d.value===1?(C(),E(N,{key:0,type:"primary",onClick:m},{default:o(()=>[b("下一步")]),_:1})):_e("",!0),d.value===2?(C(),U(oe,{key:1},[a(N,{onClick:S},{default:o(()=>[b("上一步")]),_:1}),a(N,{type:"primary",onClick:V},{default:o(()=>[b("提 交")]),_:1})],64)):_e("",!0)]),_:1})]),_:1})}}});export{tt as default};
